"use strict";(self.webpackChunkaloha_vue_docs=self.webpackChunkaloha_vue_docs||[]).push([[6649],{536:(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var r=i(6365);const a=(0,r.Lk)("h1",null,"Form element",-1),s=(0,r.Lk)("h2",null,"Input",-1);var o=i(2023),l=i(7549),n=i(7791),u=i(330);const d=["bootstrap","bulma","foundation","uikit"];var h=i(2543);const c={name:"PageAJson",components:{AJson:{name:"AJson",components:{AFormElementBtnClear:o.A,ALabel:l.A,ATranslation:n.A},props:{clearButtonClass:{type:[String,Object],required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!0},inputAttributes:{type:Object,required:!1,default:()=>({})},inputClass:{required:!1},isClearButton:{type:Boolean,required:!1,default:!0},isError:{type:Boolean,default:!1},label:{type:String,required:!1},labelClass:{required:!1},maxlength:{type:String,required:!1},options:{type:Object,required:!1,default:()=>({})},required:{type:Boolean,required:!1,default:!1},modelValue:{type:[String,Number,Object,Array],required:!1},framework:{type:String,required:!1,validator:e=>-1!==d.indexOf(e)},nullValue:{required:!1,default:""},isScalable:{type:Boolean,required:!1},rows:{type:[String,Number],required:!1}},emits:["update:modelValue","change"],setup(e){const{frameworkLocal:t}=function(e){const t=(0,r.lW)(e,"framework"),i=(0,r.WQ)("$aloha","{}"),a=(0,r.WQ)("framework",void 0)||{},s=(0,r.EW)((()=>t.value||a.value||i.framework||"bootstrap")),o=(0,r.EW)((()=>"bootstrap"===s.value)),l=(0,r.EW)((()=>"foundation"===s.value));return{frameworkLocal:s,isBootstrap:o,isFoundation:l}}(e);return{frameworkLocal:t}},data:()=>({jsonString:void 0,jsonStringInput:void 0,initialModelValue:void 0,isAutosizeStarted:void 0,parseError:void 0}),computed:{disabledLocal(){return this.disabled||!1},isClearButtonLocal(){return!!(0,h.isUndefined)(this.isClearButton)||this.isClearButton},isModel(){return!(!this.modelValue&&0!==this.modelValue)},inputClassLocal(){if(this.frameworkLocal)return{bootstrap:"form-control",bulma:"input",foundation:"",uikit:"uk-input"}[this.frameworkLocal]},requiredLocal(){return this.required||!1},ariaRequired(){return`${this.requiredLocal}`},ariaInvalid(){if(this.isError)return"true"},disabledClearButton(){return this.disabledLocal||!this.isModel},rowsLocal(){return this.rows?this.rows:this.isScalable?1:void 0},isFormatJsonButtonDisabled(){return!!this.parseError}},created(){this.setInitialValue(),this.onJSONtoString()},mounted(){this.initAutosize()},beforeUnmount(){this.destroyAutosize()},methods:{setInitialValue(){this.initialModelValue=this.modelValue||""},onJSONtoString(){this.modelValue?this.jsonString=JSON.stringify(this.modelValue,void 0,2):this.jsonString="",this.jsonStringInput=this.jsonString,this.parseError=void 0},initAutosize(){this.isScalable&&((0,u.A)(this.$refs.textarea),this.isAutosizeStarted=!0)},stringToJSON(e){const t=e.target.value;if(t&&0!==t.length)try{const i=JSON.parse(t);this.jsonString=JSON.stringify(i,void 0,2),this.parseError=void 0,this.changeModel({modelValue:i,$event:e})}catch(e){this.parseError=e.toString()}else this.changeModel({modelValue:this.nullValue,$event:e});this.jsonStringInput=t},onInput(e){if(this.disabledLocal)return;let t=e.target.value;t||(t=this.nullValue),this.changeModel({modelValue:t,$event:e})},changeModel({modelValue:e,$event:t}){this.$emit("update:modelValue",e),this.$emit("change",{model:e,props:this.$props,$event:t})},clearModel(){this.disabledClearButton||(this.changeModel({modelValue:this.nullValue}),setTimeout((()=>{u.A.update(this.$refs.textarea)})))},destroyAutosize(){this.isAutosizeStarted&&u.A.destroy(this.$refs.textarea)},formatJson(){try{this.jsonStringInput=JSON.stringify(JSON.parse(this.jsonStringInput),void 0,2)}catch(e){this.parseError=e.toString()}},resetJson(e){this.changeModel({modelValue:this.initialModelValue,$event:e}),setTimeout((()=>this.onJSONtoString()))}},render(){return(0,r.h)("div",{class:"a_form_element__parent"},[this.label&&(0,r.h)(l.A,{id:this.id,label:this.label,labelClass:this.labelClass,required:this.required}),(0,r.h)("div",{},[(0,r.h)("button",{disabled:this.isFormatJsonButtonDisabled,onClick:this.formatJson},["format"]),(0,r.h)("button",{title:"Eingabe aktuellen Wert zurücksetzen",onClick:this.onJSONtoString},["JSONtoString"]),(0,r.h)("button",{title:"ALLE Änderungen verwefen",onClick:this.resetJson},["reset"])]),(0,r.h)("div",{class:"a_form_element"},[(0,r.h)("textarea",{id:this.id,ref:"textarea",value:this.jsonStringInput,rows:this.rowsLocal,class:["a_textarea",this.inputClass,this.inputClassLocal,{a_textarea_scalable:this.isScalable,a_form_element_with_btn_close:this.isClearButtonLocal}],disabled:this.disabledLocal,"aria-required":this.ariaRequired,"aria-invalid":this.ariaInvalid,maxlength:this.maxlength,...this.inputAttributes,onInput:this.stringToJSON}),this.isClearButtonLocal&&(0,r.h)(o.A,{disabled:this.disabledClearButton,clearButtonClass:this.clearButtonClass,onClear:this.clearModel})]),this.parseError&&(0,r.h)("div",{},[this.parseError])])}}},data:()=>({model1:{aloha:{hola:["aloha"]}}})},m=(0,i(6262).A)(c,[["render",function(e,t){const i=(0,r.g2)("a-json");return(0,r.uX)(),(0,r.CE)("div",null,[a,s,(0,r.bF)(i,{id:"input1",modelValue:e.model1,"onUpdate:modelValue":t[0]||(t[0]=t=>e.model1=t),label:"JSON",required:!0},null,8,["modelValue"]),(0,r.Lk)("pre",null,"model1: "+(0,r.v_)(e.model1),1)])}]])}}]);
//# sourceMappingURL=chunk.6649.fcd3386b9fba60689262.js.map