import{O as H,A as M,c as E}from"./bundle.index.B5hAPZ2P.js";import{t as l,r,a,G as q,n as B,m as w,h as x}from"./chunk.vendor.QyCKSPD8.js";import{g as p,H as P,u as V}from"./chunk.vendor-lodash.GuFqEw-8.js";function C(e,{hasTextAndLength:s=r(!1),isMoreButtonObservingVisible:i=r(!1),isOpen:t=r(!1),isTextShorterThanTextLength:n=r(!1)}){const u=l(e,"btnIconLeftLess"),o=l(e,"btnIconLeftMore"),c=l(e,"btnIconRightLess"),b=l(e,"btnIconRightMore"),f=l(e,"btnTextLess"),d=l(e,"btnTextMore"),v=l(e,"btnTitleLess"),h=l(e,"btnTitleMore"),g=l(e,"showLess"),T=r(void 0),L=a(()=>t.value?f.value:d.value),m=a(()=>t.value?v.value:h.value),S=a(()=>t.value?u.value:o.value),R=a(()=>t.value?c.value:b.value),_=a(()=>s.value?n.value?!1:g.value?!0:!t.value:i.value?g.value?!0:!t.value:!1);return{btnIconLeft:S,btnIconRight:R,btnText:L,btnTitle:m,buttonRef:T,isButtonVisible:_}}function N({hasTextAndLength:e=a(()=>!1),isOpen:s=r(!1)}){return{ariaExpanded:a(()=>{if(e.value)return s.value})}}function $(e,{hasTextAndLength:s=a(()=>!1),isOpen:i=r(!1)}){const t=l(e,"height");return{maxHeightStyle:a(()=>{if(!(s.value||i.value))return t.value===0?"max-height: none;":`max-height: ${t.value}px`})}}function k(e){const s=l(e,"isOpenDefault");return{isOpen:r(s.value)}}function D(e,{isBtnHiddenDependentOnTextLength:s=a(()=>!1)}){const i=l(e,"height"),t=r(void 0),n=r(void 0),u=r(void 0),o=()=>{if(s.value)return;(p(t.value,"offsetHeight")||0)>i.value?u.value=!0:u.value=!1};return{checkHeight:o,containerRef:t,isMoreButtonObservingVisible:u,startObservingMutation:()=>{s.value||(n.value=new ResizeObserver(P(()=>{o()},300)),n.value.observe(t.value))},stopObservingMutation:()=>{s.value||n.value&&n.value.unobserve(t.value)}}}function W({hasTextAndLength:e=a(()=>!1),isOpen:s=r(!1)}){return{textScreenReaderLocal:a(()=>{if(!e.value)return s.value?"_A_SHOW_MORE_LESS_SCREEN_READER_":"_A_SHOW_MORE_MORE_SCREEN_READER_"})}}function G(e,{isOpen:s=r(!1)}){const i=l(e,"text"),t=l(e,"textLength"),n=a(()=>!!(i.value&&t.value)),u=a(()=>t.value>i.value.length),o=a(()=>n.value&&u.value),c=a(()=>{const f=i.value.slice(0,t.value).trimEnd();let d="...",v=!0;for(let h=f.length-1;h>f.length-4&&f[h]===".";h--){if(v)d=d.slice(0,-1);else break;v=!0}return`${f}${d}`}),b=a(()=>{if(n.value){if(u.value)return i.value;if(!s.value)return c.value}return i.value});return{hasTextAndLength:n,isBtnHiddenDependentOnTextLength:o,isTextShorterThanTextLength:u,textLocal:b}}function j(e,{textLocal:s=a(()=>{})}){const i=l(e,"safeHtml"),t=l(e,"html");return{isTextOrHtmlVisible:a(()=>!!(s.value||i.value||t.value))}}function Y(e,{emit:s},{containerRef:i=r(void 0),hasTextAndLength:t=a(()=>!1),isOpen:n=r(!1),stopObservingMutation:u=()=>{}}){const o=l(e,"showLess");return{isOpen:n,toggleButton:()=>{n.value=!n.value,n.value&&!o.value&&u(),s("toggle",{isOpen:n.value}),t.value&&n.value&&!window.isScrollDisabled&&q().then(()=>H({element:i.value}))}}}const X={name:"AShowMore",inheritAttrs:!0,props:{alwaysTranslate:{type:Boolean,required:!1},btnAttributes:{type:Object,required:!1,default:()=>({})},btnClass:{type:[String,Object],required:!1,default:"a_btn a_btn_link a_p_0"},btnIconLeftLess:{type:String,required:!1,default:void 0},btnIconLeftMore:{type:String,required:!1,default:void 0},btnIconRightLess:{type:String,required:!1,default:void 0},btnIconRightMore:{type:String,required:!1,default:void 0},btnId:{type:String,required:!1,default:void 0},btnParentClass:{type:String,required:!1,default:"a_text_center"},btnTextLess:{type:String,required:!1,default:"_A_SHOW_MORE_LESS_"},btnTextMore:{type:String,required:!1,default:"_A_SHOW_MORE_MORE_"},btnTitleLess:{type:String,required:!1,default:void 0},btnTitleMore:{type:String,required:!1,default:void 0},btnTitlePlacement:{type:String,required:!1,default:void 0},disabled:{type:Boolean,required:!1,default:!1},height:{type:Number,required:!1,default:200,validator:e=>e>=0},html:{type:String,required:!1,default:void 0},id:{type:String,required:!1,default:()=>V("a_show_more_")},isBtnTitleHtml:{type:Boolean,required:!1},isOpenDefault:{type:Boolean,required:!1,default:!1},safeHtml:{type:String,required:!1,default:void 0},showLess:{type:Boolean,required:!1,default:!0},text:{type:String,required:!1,default:void 0},textLength:{type:Number,required:!1,default:void 0,validator:e=>e>0}},emits:["toggle"],setup(e,s){const{expose:i}=s,{isOpen:t}=k(e),{hasTextAndLength:n,isBtnHiddenDependentOnTextLength:u,isTextShorterThanTextLength:o,textLocal:c}=G(e,{isOpen:t}),{isTextOrHtmlVisible:b}=j(e,{textLocal:c}),{checkHeight:f,containerRef:d,isMoreButtonObservingVisible:v,startObservingMutation:h,stopObservingMutation:g}=D(e,{isBtnHiddenDependentOnTextLength:u}),{toggleButton:T}=Y(e,s,{containerRef:d,hasTextAndLength:n,isOpen:t,stopObservingMutation:g}),{btnIconLeft:L,btnIconRight:m,btnText:S,btnTitle:R,buttonRef:_,isButtonVisible:I}=C(e,{hasTextAndLength:n,isMoreButtonObservingVisible:v,isOpen:t,isTextShorterThanTextLength:o}),{maxHeightStyle:O}=$(e,{hasTextAndLength:n,isOpen:t}),{textScreenReaderLocal:y}=W({hasTextAndLength:n,isOpen:t}),{ariaExpanded:A}=N({hasTextAndLength:n,isOpen:t});return i({buttonRef:_,containerRef:d,isOpen:t,toggleButton:T}),B(()=>{f(),h()}),w(()=>{g()}),{ariaExpanded:A,btnIconLeft:L,btnIconRight:m,btnText:S,btnTitle:R,buttonRef:_,containerRef:d,hasTextAndLength:n,isButtonVisible:I,isOpen:t,isTextOrHtmlVisible:b,maxHeightStyle:O,textLocal:c,textScreenReaderLocal:y,toggleButton:T}},render(){return x("div",{class:["a_show_more",{a_show_more_open:this.isOpen}]},[x("div",{class:"a_show_more__wrapper",style:this.maxHeightStyle},[x("div",{ref:"containerRef",id:this.id,ariaExpanded:this.ariaExpanded,...this.$attrs},[this.isTextOrHtmlVisible&&x(M,{alwaysTranslate:this.alwaysTranslate,tag:"div",text:this.textLocal,html:this.html,safeHtml:this.safeHtml}),this.$slots.default&&this.$slots.default({isButtonVisible:this.isButtonVisible,isOpen:this.isOpen})])]),this.isButtonVisible&&x("div",{class:this.btnParentClass},[x(E,{ref:"buttonRef",id:this.btnId,alwaysTranslate:this.alwaysTranslate,"aria-controls":this.id,class:["a_show_more__button",this.btnClass],disabled:this.disabled,iconLeft:this.btnIconLeft,iconRight:this.btnIconRight,isTitleHtml:this.isBtnTitleHtml,text:this.btnText,textAriaHidden:!this.hasTextAndLength,textScreenReader:this.textScreenReaderLocal,title:this.btnTitle,titlePlacement:this.btnTitlePlacement,...this.btnAttributes,onClick:this.toggleButton},()=>this.$slots.button&&this.$slots.button({isButtonVisible:this.isButtonVisible,isOpen:this.isOpen}))])])}};export{X as A};
