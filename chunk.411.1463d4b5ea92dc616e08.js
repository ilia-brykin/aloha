"use strict";(self.webpackChunkaloha_vue_docs=self.webpackChunkaloha_vue_docs||[]).push([[411],{6079:(e,t,l)=>{l.r(t),l.d(t,{default:()=>y});var a=l(2147);const n=(0,a._)("h1",null,"PageAccordion",-1),s=(0,a._)("h2",null,"without alwaysOpen",-1),i=(0,a._)("h2",null,"with alwaysOpen",-1),o=(0,a._)("h2",null,"with Slots",-1),r=(0,a._)("h2",null,"readonly",-1);var d=l(2284),u=l(3059),c=l(3343);const h={name:"AAccordionItem",props:{isParentOpen:{type:Boolean,required:!0},item:{type:Object,required:!0},itemIndex:{type:Number,required:!0},keyId:{type:String,required:!1,default:void 0},parentsIds:{type:Array,required:!1,default:()=>[]},parentIndexes:{type:Array,required:!1,default:()=>[]}},inject:["classBody","classHeader","id","withGap"],setup(e){const{closeItemIfOpen:t,currentId:l,isOpen:n,parentIndexesForChild:s,parentsIdsForChild:i,toggleLocal:o}=function(e){const t=(0,a.Vh)(e,"isParentOpen"),l=(0,a.Vh)(e,"item"),n=(0,a.Vh)(e,"itemIndex"),s=(0,a.Vh)(e,"keyId"),i=(0,a.Vh)(e,"parentsIds"),o=(0,a.Vh)(e,"parentIndexes"),r=(0,a.f3)("idsForOpen"),d=(0,a.f3)("toggle"),h=(0,a.Fl)((()=>l.value[c.Z])),p=(0,a.Fl)((()=>!!t.value&&-1!==r.value.indexOf(h.value))),y=(0,a.Fl)((()=>{const e=(0,u.cloneDeep)(i.value);return e.push(`${h.value}`),e})),b=(0,a.Fl)((()=>o.value.join("."))),v=(0,a.Fl)((()=>b.value?`${b.value}.${n.value}`:`${n.value}`)),I=(0,a.Fl)((()=>{const e=(0,u.cloneDeep)(o.value);return e.push(`${v.value}`),e})),F=e=>{d({$event:e,parentsIds:i.value,isOpen:p.value,item:l.value,itemIndex:n.value})};return{closeItemIfOpen:()=>{p.value&&s.value&&F()},currentId:h,isOpen:p,parentIndexesForChild:I,parentsIdsForChild:y,toggleLocal:F}}(e),{children:r,hasChildren:d}=function(e){const t=(0,a.Vh)(e,"item"),l=(0,a.f3)("keyChildren"),n=(0,a.Fl)((()=>(0,u.get)(t.value,l.value,[])||[])),s=(0,a.Fl)((()=>0!==n.value.length));return{children:n,hasChildren:s}}(e),{classBodyLocal:h,classButtonLocal:p,classHeaderLocal:y}=function(e){const t=(0,a.Vh)(e,"item"),l=(0,a.f3)("keyClassBody"),n=(0,a.f3)("keyClassHeader"),s=(0,a.f3)("keyClassButton"),i=(0,a.Fl)((()=>{if(l.value)return(0,u.get)(t.value,l.value)})),o=(0,a.Fl)((()=>{if(n.value)return(0,u.get)(t.value,n.value)}));return{classBodyLocal:i,classButtonLocal:(0,a.Fl)((()=>{if(s.value)return(0,u.get)(t.value,s.value)})),classHeaderLocal:o}}(e),{isBodyVisible:b,isOpenFirst:v,isRender:I}=function(e){const t=(0,a.Vh)(e,"item"),l=(0,a.f3)("keyIsRender"),n=(0,a.f3)("keyIsRenderBodyByFirstOpen"),s=(0,a.iH)(!1),i=(0,a.Fl)((()=>{if(n.value)return(0,u.get)(t.value,n.value)})),o=(0,a.Fl)((()=>!i.value||s.value)),r=(0,a.Fl)((()=>!l.value||!!(0,u.get)(t.value,l.value,!0)));return{isBodyVisible:o,isOpenFirst:s,isRender:r}}(e),{buttonAttributes:F,buttonTag:m,contentLocal:_,idForCollapse:g,labelLocal:f}=function(e,{classButtonLocal:t=(0,a.Fl)((()=>{})),isOpen:l=(0,a.Fl)((()=>!1)),toggleLocal:n=(()=>{}),currentId:s=(0,a.Fl)((()=>""))}){const i=(0,a.Vh)(e,"item"),o=(0,a.f3)("classButton"),r=(0,a.f3)("disabled"),d=(0,a.f3)("id"),c=(0,a.f3)("isCaret"),h=(0,a.f3)("keyContent"),p=(0,a.f3)("keyLabel"),y=(0,a.f3)("readonly"),b=(0,a.f3)("withGap"),v=(0,a.Fl)((()=>!(!r.value&&!i.value.disabled))),I=(0,a.Fl)((()=>(0,u.isUndefined)(i.value.isCaret)?c.value:i.value.isCaret)),F=(0,a.Fl)((()=>y.value||i.value.readonly)),m=(0,a.Fl)((()=>`${d.value}_${s.value}`)),_=(0,a.Fl)((()=>F.value?"div":"a")),g=(0,a.Fl)((()=>{const e={class:["a_accordion__button",o.value,t.value,{a_accordion__button_collapsed:!l.value,a_accordion__button_has_not_caret:!I.value,a_accordion__button_with_gap:b.value,readonly:F.value}],id:i.value.id};return F.value||(e.ariaExpanded=l.value,e["aria-controls"]=m.value,e.rolw="button",e.tabindex=0,e.disabled=v.value,e.onClick=n),e})),f=(0,a.Fl)((()=>p.value?(0,u.get)(i.value,p.value):""));return{buttonAttributes:g,buttonTag:_,contentLocal:(0,a.Fl)((()=>h.value?(0,u.get)(i.value,h.value):"")),idForCollapse:m,labelLocal:f}}(e,{classButtonLocal:p,isOpen:n,toggleLocal:o,currentId:l});return(0,a.YP)(n,(e=>{e&&!v.value&&(v.value=!0)}),{immediate:!0}),(0,a.Jd)((()=>{t()})),{buttonAttributes:F,buttonTag:m,children:r,classBodyLocal:h,classButtonLocal:p,classHeaderLocal:y,contentLocal:_,currentId:l,hasChildren:d,idForCollapse:g,isBodyVisible:b,isOpen:n,isRender:I,labelLocal:f,parentIndexesForChild:s,parentsIdsForChild:i}},render(){let e=[];return this.isBodyVisible&&(e=[this.item.slotContent&&this.$slots[this.item.slotContent]?this.$slots[this.item.slotContent]({item:this.item,itemIndex:this.itemIndex,parentsIds:this.parentsIds,parentIndexes:this.parentIndexes,id:this.id,currentId:this.currentId}):this.$slots.accordionContent?this.$slots.accordionContent({item:this.item,itemIndex:this.itemIndex,parentsIds:this.parentsIds,parentIndexes:this.parentIndexes,id:this.id,currentId:this.currentId}):this.contentLocal&&(0,a.wy)((0,a.h)("div"),[[d.Z,this.contentLocal]]),this.hasChildren&&(0,a.h)("div",{class:["a_accordion"]},[this.children.map(((e,t)=>(0,a.h)((0,a.up)("AAccordionItem"),{key:e[c.Z],item:e,itemIndex:t,isParentOpen:this.isOpen,parentsIds:this.parentsIdsForChild,parentIndexes:this.parentIndexesForChild,keyId:this.keyId},this.$slots)))])]),this.isRender&&(0,a.h)("div",{class:["a_accordion__item",{a_accordion__item_with_gap:this.withGap}]},[(0,a.h)("div",{class:["a_accordion__header",this.classHeader,this.classHeaderLocal]},[(0,a.h)(this.buttonTag,this.buttonAttributes,[this.item.slotButton&&this.$slots[this.item.slotButton]?this.$slots[this.item.slotButton]({item:this.item,itemIndex:this.itemIndex,parentsIds:this.parentsIds,parentIndexes:this.parentIndexes,id:this.id,currentId:this.currentId}):this.$slots.accordionButton&&this.$slots.accordionButton({item:this.item,itemIndex:this.itemIndex,parentsIds:this.parentsIds,parentIndexes:this.parentIndexes,id:this.id,currentId:this.currentId}),this.labelLocal&&(0,a.wy)((0,a.h)("span"),[[d.Z,this.labelLocal]])])]),(0,a.h)("div",{id:this.idForCollapse,class:["a_accordion__collapse_box",{a_accordion__collapse_box_show:this.isOpen}]},[(0,a.h)("div",{class:["a_accordion__body",this.classBody,this.classBodyLocal]},e)])])}};const p={name:"PageAccordion",components:{AAccordion:{name:"AAccordion",provide(){return{classBody:(0,a.Fl)((()=>this.classBody)),classButton:(0,a.Fl)((()=>this.classButton)),classHeader:(0,a.Fl)((()=>this.classHeader)),disabled:(0,a.Fl)((()=>this.disabled)),id:(0,a.Fl)((()=>this.id)),idsForOpen:(0,a.Fl)((()=>this.idsForOpen)),isCaret:(0,a.Fl)((()=>this.isCaret)),keyChildren:(0,a.Fl)((()=>this.keyChildren)),keyClassBody:(0,a.Fl)((()=>this.keyClassBody)),keyClassButton:(0,a.Fl)((()=>this.keyClassButton)),keyClassHeader:(0,a.Fl)((()=>this.keyClassHeader)),keyContent:(0,a.Fl)((()=>this.keyContent)),keyIsRender:(0,a.Fl)((()=>this.keyIsRender)),keyIsRenderBodyByFirstOpen:(0,a.Fl)((()=>this.keyIsRenderBodyByFirstOpen)),keyLabel:(0,a.Fl)((()=>this.keyLabel)),readonly:(0,a.Fl)((()=>this.readonly)),withGap:(0,a.Fl)((()=>this.withGap)),toggle:this.toggleLocal}},props:{alwaysOpen:{type:Boolean,required:!1},classBody:{type:[String,Object],required:!1,default:""},classButton:{type:[String,Object],required:!1,default:void 0},classHeader:{type:[String,Object],required:!1,default:""},disabled:{type:Boolean,required:!1},id:{type:String,required:!1,default:(0,u.uniqueId)("accordion_")},idsForOpenDefault:{type:Array,required:!1,default:()=>[]},isCaret:{type:Boolean,required:!1,default:!0},data:{type:Array,required:!0},keyClassBody:{type:String,required:!1,default:"classBody"},keyClassButton:{type:String,required:!1,default:"classButton"},keyClassHeader:{type:String,required:!1,default:"classHeader"},keyContent:{type:String,required:!1,default:"content"},keyId:{type:String,required:!1,default:void 0},keyIsRender:{type:String,required:!1,default:"isRender"},keyIsRenderBodyByFirstOpen:{type:String,required:!1,default:"isRenderBodyByFirstOpen"},keyLabel:{type:String,required:!1,default:"label"},keyChildren:{type:String,required:!1,default:"children"},prevent:{type:Boolean,required:!1},readonly:{type:Boolean,required:!1},stop:{type:Boolean,required:!1},withGap:{type:Boolean,required:!1},indexesForOpen:{type:Array,required:!1,default:()=>[]}},emits:["toggle"],setup(e,t){const{idsForOpen:l,toggleLocal:n}=function(e,{emit:t}){const l=(0,a.Vh)(e,"alwaysOpen"),n=(0,a.Vh)(e,"disabled"),s=(0,a.Vh)(e,"idsForOpenDefault"),i=(0,a.Vh)(e,"prevent"),o=(0,a.Vh)(e,"stop"),r=(0,a.iH)(s.value);return(0,a.YP)(s,(e=>{(0,u.isEqual)(e,r.value)||(r.value=(0,u.cloneDeep)(e))})),{idsForOpen:r,toggleLocal:({item:e,parentsIds:a,isOpen:s,$event:d})=>{if(n.value)return;const h=(0,u.cloneDeep)(a),p=e[c.Z];l.value?(({currentId:e,isOpen:t})=>{if(t){const t=e.split("__")[0];r.value=(0,u.filter)(r.value,(e=>!(0,u.startsWith)(e,t)))}else r.value.push(e)})({item:e,currentId:p,isOpen:s}):(({currentId:e,parentsIds:t,isOpen:l})=>{r.value=l?t:[...t,e]})({parentsIds:h,currentId:p,isOpen:s}),t("toggle",{idsForOpen:r.value,currentId:p,parentsIds:h,isOpen:s,$event:d,item:e}),o.value&&d&&d.stopPropagation(),i.value&&d&&d.preventDefault()}}}(e,t),{dataWithIds:s}=function(e){const t=(0,a.Vh)(e,"data"),l=(0,a.Vh)(e,"keyId"),n=(0,a.Vh)(e,"keyChildren"),s=({items:e,parentIds:t=""})=>{(0,u.forEach)(e,((e,a)=>{const i=(0,u.get)(e,l.value);let o="";o=(0,u.isNil)(i)?`${t}${a}`:`${t}${i}`,e[c.Z]=o;const r=e[n.value];r&&r.length&&s({items:r,parentIds:`${o}_`})}))};return{dataWithIds:(0,a.Fl)((()=>{const e=(0,u.cloneDeep)(t.value);return s({items:e}),e}))}}(e),{initIdsFromIndexesForOpen:i}=function(e,{idsForOpen:t=(0,a.Fl)((()=>[])),dataWithIds:l=(0,a.Fl)((()=>[]))}){const n=(0,a.Vh)(e,"indexesForOpen"),s=(0,a.Vh)(e,"keyChildren"),i=({isInit:e}={})=>{if(e&&!n.value.length)return;const a=[];s.value?(0,u.forEach)(n.value,(e=>{const t=(0,u.get)(l.value,(({indexForOpen:e})=>{let t=`${e}`.replaceAll(".",`.${s.value}.`);return t+=`.${c.Z}`,t})({indexForOpen:e}));(0,u.isNil)(t)||a.push(t)})):(0,u.forEach)(n.value,(e=>{const t=(0,u.get)(l.value,`${e}.${c.Z}`);(0,u.isNil)(t)||a.push(t)})),t.value=a};return(0,a.YP)(n,(()=>{i()})),{initIdsFromIndexesForOpen:()=>{i({isInit:!0})}}}(e,{idsForOpen:l,dataWithIds:s});return i(),{dataWithIds:s,idsForOpen:l,toggleLocal:n}},render(){return(0,a.h)("div",{class:["a_accordion"]},[this.dataWithIds.map(((e,t)=>(0,a.h)(h,{key:e[c.Z],item:e,itemIndex:t,isParentOpen:!0,keyId:this.keyId},this.$slots)))])}}},data:()=>({items:[{label:"label labellabe llabellabellabellab ellabellabel1 labellabellabellabellabellabe labellabellabellabellabellabe labellabellabellabellabellabe labellabellabellabellabellabe labellabellabellabellabellabe labellabellabellabellabellabelabellabellabellabellabellabe llabellabellabel",content:"content 1",slotContent:"aloha",keyIsRenderBodyByFirstOpen:!0,id:"aloha_1",children:[{label:"label 1.1",content:"content 1.1",keyIsRenderBodyByFirstOpen:!0,id:"aloha_1",children:[{label:"label 1.1.1",content:"content 1.1.1",id:"aloha_1"},{label:"label 1.1.2",content:"content 1.1.2",id:"aloha_2"},{label:"label 1.1.3",content:"content 1.1.3",readonly:!0,isCaret:!1,id:"aloha_3"}]},{label:"label 1.2",content:"content 1.2",id:"aloha_2"},{label:"label 1.3",content:"content 1.3",id:"aloha_3",children:[{label:"label 1.3.1",content:"content 1.3.1",id:"aloha_1"},{label:"label 1.3.2",content:"content 1.3.2",id:"aloha_2"},{label:"label 1.3.3",content:"content 1.3.3",id:"aloha_3"}]}]},{label:"level 2",content:"content 2",id:"aloha_2"},{label:"level 3",content:"content 3",id:"aloha_3"}],indexesForOpenDefault:["0","0.0","0.1","1"]}),mounted(){this.closeFirstItem()},methods:{closeFirstItem(){setTimeout((()=>{this.items.shift()}),2e3)},toggleAccordion(e){console.log("arg",e)}}},y=(0,l(1419).Z)(p,[["render",function(e,t){const l=(0,a.up)("a-accordion");return(0,a.wg)(),(0,a.iD)("div",null,[n,s,(0,a.Wm)(l,{data:e.items,"key-is-render-body-by-first-open":"keyIsRenderBodyByFirstOpen","key-id":"id"},null,8,["data"]),i,(0,a.Wm)(l,{ref:"aloha",data:e.items,"always-open":!0,"with-gap":!0,"indexes-for-open":e.indexesForOpenDefault,"key-id":"id",onToggle:e.toggleAccordion},{aloha:(0,a.w5)((({item:e})=>[(0,a._)("pre",null,(0,a.zw)(e),1)])),_:1},8,["data","indexes-for-open","onToggle"]),o,(0,a.Wm)(l,{data:e.items,"key-label":"","key-content":""},{accordionButton:(0,a.w5)((({item:e,itemIndex:t})=>[(0,a._)("span",null,[(0,a.Uk)((0,a.zw)(e.label),1),(0,a._)("strong",null,"index: "+(0,a.zw)(t),1)])])),accordionContent:(0,a.w5)((({item:e,itemIndex:t})=>[(0,a._)("strong",null,(0,a.zw)(e.content),1)])),_:1},8,["data"]),r,(0,a.Wm)(l,{data:e.items,readonly:!0,"is-caret":!1,"class-button":"a_color_link"},null,8,["data"])])}]])}}]);
//# sourceMappingURL=chunk.411.1463d4b5ea92dc616e08.js.map