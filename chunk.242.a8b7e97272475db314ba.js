"use strict";(self.webpackChunkaloha_vue_docs=self.webpackChunkaloha_vue_docs||[]).push([[242],{9174:(r,e,a)=>{a.r(e),a.d(e,{default:()=>T});var o=a(2147);const t=[(0,o._)("h1",null,"PageApi",-1)];var s=a(8615),l=a(3059);const n=(0,o.iH)("/api/"),u=(0,o.iH)(s.Z.create()),p=(0,o.iH)({}),d=(0,o.iH)({}),i=(0,o.iH)({}),b={},c={};function h({all:r=!1,abortGroup:e,excludeAbortGroup:a}){const o=function({excludeAbortGroup:r}){const e={};return r&&((0,l.isString)(r)?e[r]=!0:(0,l.isArray)(r)&&(0,l.forEach)(r,(r=>{e[r]=!0}))),e}({excludeAbortGroup:a});if(r)(0,l.forEach)(b,((r,a)=>{o[a]||(r.abort(),delete b[a],c[e]&&delete c[e])}));else if(e){let r=[];(0,l.isString)(e)?r.push(e):(0,l.isArray)(e)&&(r=e),(0,l.forEach)(r,(r=>{o[r]||b[r]&&(b[r].abort(),delete b[r],c[e]&&delete c[e])}))}}function f(){return{abortHttp:h,deleteHttp:v,getHttp:m,getListHttp:E,getOptionsHttp:g,patchHttp:P,postHttp:y,putHttp:H}}function m({url:r,urlBase:e,data:a,urlParams:o={},headerParams:t,responseType:s,apiSaveId:l,keyId:n,fullResponse:u,showError:p,ignoreErrorHandler:d,abortable:i=!0,abortGroup:b=""}){return G({methodHttp:"get",url:r,urlBase:e,urlParams:o,data:a,headerParams:t,responseType:s,apiSaveId:l,keyId:n,fullResponse:u,showError:p,ignoreErrorHandler:d,abortable:i,abortGroup:b})}function E({url:r,urlBase:e,data:a,urlParams:o={},headerParams:t,responseType:s,apiSaveId:l,keyId:n,fullResponse:u,showError:p,ignoreErrorHandler:d,abortable:i=!0,abortGroup:b=""}){return G({methodHttp:"get",url:r,urlBase:e,urlParams:o,data:a,headerParams:t,responseType:s,apiSaveId:l,keyId:n,fullResponse:u,showError:p,ignoreErrorHandler:d,abortable:i,abortGroup:b,expectedList:!0})}function g({url:r,urlBase:e,data:a,urlParams:o={},headerParams:t,responseType:s,keyId:l,fullResponse:n,showError:u,ignoreErrorHandler:p,abortable:d=!0,abortGroup:i=""}){return G({methodHttp:"options",url:r,urlBase:e,urlParams:o,data:a,headerParams:t,responseType:s,keyId:l,fullResponse:n,showError:u,abortable:d,abortGroup:i,ignoreErrorHandler:p})}function y({url:r,data:e,urlParams:a={},headerParams:o,responseType:t,fullResponse:s,showError:l,ignoreErrorHandler:n,abortable:u=!0,abortGroup:p=""}){return G({methodHttp:"post",url:r,urlParams:a,data:e,headerParams:o,responseType:t,fullResponse:s,showError:l,abortable:u,abortGroup:p,ignoreErrorHandler:n})}function H({url:r,urlBase:e,data:a,urlParams:o={},headerParams:t,responseType:s,fullResponse:l,showError:n,ignoreErrorHandler:u,abortable:p=!0,abortGroup:d=""}){return G({methodHttp:"put",url:r,urlBase:e,urlParams:o,data:a,headerParams:t,responseType:s,fullResponse:l,showError:n,abortable:p,abortGroup:d,ignoreErrorHandler:u})}function P({url:r,urlBase:e,data:a,urlParams:o={},headerParams:t,responseType:s,fullResponse:l,showError:n,ignoreErrorHandler:u,abortable:p=!0,abortGroup:d=""}){return G({methodHttp:"patch",url:r,urlBase:e,urlParams:o,data:a,headerParams:t,responseType:s,fullResponse:l,showError:n,abortable:p,abortGroup:d,ignoreErrorHandler:u})}function v({url:r,urlBase:e,data:a,urlParams:o={},headerParams:t,responseType:s,fullResponse:l,showError:n,ignoreErrorHandler:u,abortable:p=!0,abortGroup:d=""}){return G({methodHttp:"delete",url:r,urlBase:e,urlParams:o,data:a,headerParams:t,responseType:s,fullResponse:l,showError:n,abortable:p,abortGroup:d,ignoreErrorHandler:u})}function G({methodHttp:r,url:e,urlBase:a,urlParams:o,data:t,headerParams:s={},responseType:h="json",apiSaveId:f,keyId:m,fullResponse:E,showError:g=!1,ignoreErrorHandler:y,abortable:H=!0,abortGroup:P="",expectedList:v}){let G;if(f&&(G=p.value[f],G&&G.loading))return G.promise;const k=new Promise(((k,T)=>{if(G&&!G.loading){if(m){if(G.keyData)return k(G.keyData);const r=w({data:G.data,keyId:m});return p.value[f].keyData=r,k(r)}return k(G.data)}const B=function({url:r,params:e}){const a=r||"";let o="";(0,l.forEach)(e,((r,e)=>{(0,l.isArray)(r)?o=function({array:r,url:e,id:a}){if(!r.length)return e;let o=e||"";return"fields"===a||"ordering"===a?(o&&(o+="&"),o+=`${a}=`,o+=r.join(",")):(0,l.forEach)(r,(r=>{o&&(o+="&"),o+=`${a}=${r}`})),o}({id:e,array:r,url:o}):(0,l.isPlainObject)(r)?(0,l.forEach)(r,((r,e)=>{r&&(o&&(o+="&"),o+=`${e}=${r}`)})):(0,l.isNil)(r)||(o&&(o+="&"),o+=`${e}=${r}`)}));const t=o&&a?-1===a.indexOf("?")?"?":"&":"";return`${a}${t}${o}`}({url:e,params:o});let I=`${(0,l.isNil)(a)?n.value:a}${B}`;I=I.replace(/\/\//g,"/");const R={...i.value,...s},$=function({abortGroup:r="_global",abortable:e}={}){if(e)return b[r]=b[r]||new AbortController,b[r].signal}({abortGroup:P,abortable:H});!function({abortGroup:r,abortable:e}){e&&r&&(c[r]?c[r]++:c[r]=1)}({abortGroup:P,abortable:H}),u.value({method:r,url:I,data:t,headers:R,responseType:h,signal:$}).then((r=>{if(E)return k(r);const e=function({expectedList:r,response:e}){return r?(0,l.isArray)(e.data)?e.data:e.data.results?e.data.results:[]:e.data}({expectedList:v,response:r}),a=w({data:e,keyId:m});return f&&(p.value[f].data=e,p.value[f].keyData=a,p.value[f].loading=!1),k(m?a:e)}),(r=>{if(y||function({error:r,showError:e,client:a,resolve:o,reject:t}){if(!r)return!0;return(()=>{const s=d.value[r.status];(0,l.isFunction)(s)?s({error:r,showError:e,client:a,resolve:o,reject:t}):(0,l.isFunction)(d.value.all)&&d.value.all({error:r,showError:e,client:a,resolve:o,reject:t})})(),!0}({error:r.response,showError:g,client:u,reject:T,resolve:k}))return T(r.response)})).finally((()=>{!function({abortGroup:r,abortable:e}){e&&r&&(c[r]&&c[r]--,0===c[r]&&b[r]&&(delete c[r],delete b[r]))}({abortGroup:P,abortable:H})}))}));return G||(p.value[f]=p.value[f]||{},p.value[f].loading=!0,p.value[f].promise=k),k}function w({data:r,keyId:e}){if(e)return(0,l.keyBy)(r,e)}const k={name:"PageCloak",setup(){const{abortHttp:r,getHttp:e}=f();e({urlBase:"",url:"/api/get_response"}).then((r=>{console.log("response",r)}),(r=>{console.log("error",r)})),setTimeout((()=>{r({all:!0})}),1e3)}},T=(0,a(1419).Z)(k,[["render",function(r,e){return(0,o.wg)(),(0,o.iD)("div",null,t)}]])}}]);
//# sourceMappingURL=chunk.242.a8b7e97272475db314ba.js.map