"use strict";(self.webpackChunkaloha_vue_docs=self.webpackChunkaloha_vue_docs||[]).push([[6266],{577:(e,t,l)=>{l.r(t),l.d(t,{default:()=>H});var i=l(2147),a=l(3588),r=l(9699),o=l(6085),s=l(3403),n=l(7079),d=l(3059),u=l(5890),p=l(1275);const _={multiselect:!0,checkbox:!0};var c=l(9936),v=l(9974),h=l(389);const F={name:"AFilterCenterItem",props:{closeFilterValue:{type:Function,required:!0},dataKeyByKeyIdPerFilter:{type:Object,required:!0},disabled:{type:Boolean,required:!1},filter:{type:Object,required:!1,default:void 0},id:{type:String,required:!0},model:{type:[String,Number,Object,Array,Boolean],required:!1,default:void 0}},setup(e){const{hasCurrentFilter:t}=function(e){const t=(0,i.Vh)(e,"filter"),l=(0,i.Vh)(e,"model");return{hasCurrentFilter:(0,i.Fl)((()=>!(!t.value||t.value.hideFilterCenter||(0,d.isNil)(l.value)||""===l.value||(0,d.isArray)(l.value)&&!l.value.length)))}}(e),{filterLabel:l}=function(e,{hasCurrentFilter:t=(0,i.Fl)((()=>!1))}){const l=(0,i.Vh)(e,"filter");return{filterLabel:(0,i.Fl)((()=>t.value?l.value.label:""))}}(e,{hasCurrentFilter:t}),{modelValuesForCurrentFilter:a}=function(e,{hasCurrentFilter:t=(0,i.Fl)((()=>!1))}){const l=(0,i.Vh)(e,"dataKeyByKeyIdPerFilter"),a=(0,i.Vh)(e,"filter"),r=(0,i.Vh)(e,"model"),o=(0,i.Fl)((()=>{if(a.value)return l.value[a.value.id]})),{filterBoolean:s,filterDate:n}=(0,u.Z)();return{modelValuesForCurrentFilter:(0,i.Fl)((()=>{if(!t.value)return[];if("switch"===a.value.type||"oneCheckbox"===a.value.type)return[{label:s(r.value)}];if("date"===a.value.type)return[{label:n(r.value)}];if("select"===a.value.type||"radio"===a.value.type){const e=(0,d.get)(o.value,`${r.value}.${p.Z}`);return e?[{label:e}]:[]}if(_[a.value.type]){const e=[];return(0,d.forEach)(r.value,(t=>{o.value&&o.value[t]&&e.push({label:o.value[t][p.Z],value:t,item:o.value[t]})})),e}return[{label:r.value}]}))}}(e,{hasCurrentFilter:t}),{goToFilter:r}=function(e){const t=(0,i.Vh)(e,"filter"),l=(0,i.Vh)(e,"id"),a=(0,i.Fl)((()=>`eventATableFilterTopOnOpen_${l.value}`));return{goToFilter:()=>{t.value.main||c.Z.$emit(a.value);const e=(0,v.l)({id:t.value.id,idPrefix:`${l.value}_`,htmlId:t.value.htmlId});setTimeout((()=>{(0,h.dv)({selector:`#${e}`})}))}}}(e),{closeCurrentFilterValue:o}=function(e){const t=(0,i.Vh)(e,"closeFilterValue"),l=(0,i.Vh)(e,"disabled"),a=(0,i.Vh)(e,"filter");return{closeCurrentFilterValue:({currentModel:e})=>{l.value||t.value({filter:a.value,currentModel:e})}}}(e);return{closeCurrentFilterValue:o,filterLabel:l,goToFilter:r,hasCurrentFilter:t,modelValuesForCurrentFilter:a}},render(){return this.hasCurrentFilter&&[this.modelValuesForCurrentFilter.map((e=>(0,i.h)("div",{role:"group",class:"a_table__filters_center__item a_btn_group a_btn_group_small"},[this.filter.hasNotClose&&(0,i.h)(n.Z,{class:"a_btn a_btn_secondary",ariaHidden:!0,tabindex:-1,iconLeft:"PinFill"}),(0,i.h)(n.Z,{class:"a_btn a_btn_secondary",onClick:this.goToFilter},(()=>[this.filterLabel&&(0,i.h)(o.Z,{tag:"strong",class:"a_table__filters_center__item__label",html:this.filterLabel,textAfter:":"}),this.filter.slotName&&this.$slots[this.filter.slotName]?this.$slots[this.filter.slotName]({item:e.item,label:e.label}):(0,i.h)("span",{class:"a_table__filters_center__item__value"},e.label)])),!this.filter.hasNotClose&&(0,i.h)(n.Z,{class:"a_btn a_btn_secondary",disabled:this.disabled,iconLeft:"Close",onClick:()=>this.closeCurrentFilterValue({currentModel:e.value})})])))]}},f={name:"AFilterCenter",props:{appliedModel:{type:Object,required:!0},closeFilterValue:{type:Function,required:!0},dataKeyByKeyIdPerFilter:{type:Object,required:!0},disabled:{type:Boolean,required:!1},filtersKeyById:{type:Object,required:!0},filtersVisibleAll:{type:Array,required:!0},id:{type:String,required:!0}},setup(e){const{styleHide:t}=function(e){const t=(0,i.Vh)(e,"appliedModel"),l=(0,i.Vh)(e,"filtersKeyById"),a=(0,i.Fl)((()=>{let e=!1;return(0,d.forEach)(t.value,((t,i)=>{const a=l.value[i];if(!a||a.hideFilterCenter)return;const r=a.type;if("multiselect"===r&&"checkbox"===r){if(t&&t.length)return e=!0,!1}else if(!(0,d.isNil)(t)&&""!==t)return e=!0,!1})),e}));return{styleHide:(0,i.Fl)((()=>a.value?void 0:"display: none;"))}}(e);return{styleHide:t}},render(){return(0,i.h)("div",{class:"a_table__filters_center",style:this.styleHide},[(0,i.h)("span",{class:"a_table__filters_center__headline a_table__filters_center__item"},"Ihre Auswahl:"),this.filtersVisibleAll.map((e=>(0,i.h)(F,{key:e.id,id:this.id,disabled:this.disabled,filter:e,closeFilterValue:this.closeFilterValue,dataKeyByKeyIdPerFilter:this.dataKeyByKeyIdPerFilter,model:this.appliedModel[e.id]},this.$slots)))])}};var m=l(5689),b=l(9207),y=l(9309);const S={name:"AFiltersSaveModal",props:{changeModelFiltersSaved:{type:Function,required:!0},filtersSaved:{type:Array,required:!0},modelFiltersSaved:{type:String,required:!1,default:void 0},selectorCloseIds:{type:String,required:!0},updateFiltersSaved:{type:Function,required:!0}},emits:["close"],setup(e,t){const{initModel:l,model:a,updateModel:r}=function(e){const t=(0,i.Vh)(e,"modelFiltersSaved"),l=(0,i.iH)({});return{initModel:()=>{t.value&&(l.value={name:t.value})},model:l,updateModel:e=>{l.value=e}}}(e),{dataForm:o,isUpdate:s}=function(e,{model:t=(0,i.iH)({})}){const l=(0,i.Vh)(e,"filtersSaved"),a=(0,i.Fl)((()=>{const e={};return(0,d.forEach)(l.value,(t=>{e[t.label]=!0})),e})),r=(0,i.Fl)((()=>a.value[t.value.name])),o=(0,i.Fl)((()=>{if(r.value)return"_A_TABLE_FILTER_SAVE_MODAL_NAME_HELP_TEXT_{{name}}_"}));return{dataForm:(0,i.Fl)((()=>[{id:"name",label:"_A_TABLE_FILTER_SAVE_LABEL_NAME_",type:"text",required:!0,extra:{name:t.value.name||""},helpText:o.value}])),isUpdate:r}}(e,{model:a}),{close:n,disabledBtnSave:u,loading:p,save:_}=function(e,{emit:t},{isUpdate:l=(0,i.Fl)((()=>!1)),model:a=(0,i.iH)({})}){const r=(0,i.Vh)(e,"changeModelFiltersSaved"),o=(0,i.Vh)(e,"updateFiltersSaved"),s=(0,i.iH)(void 0),{addNotification:n}=(0,y.ZP)(),d=(0,i.Fl)((()=>!a.value.name)),u=()=>{t("close")};return{close:u,disabledBtnSave:d,loading:s,save:async()=>{s.value=!0;const e=l.value;try{await o.value({action:e?"update":"create",label:a.value.name})}catch(e){return n({text:"_A_TABLE_FILTER_SAVE_MSG_ERROR_",type:"danger"}),void(s.value=!1)}n({text:e?"_A_TABLE_FILTER_SAVE_MSG_SUCCESS_UPDATE_{{name}}_":"_A_TABLE_FILTER_SAVE_MSG_SUCCESS_CREATE_{{name}}_",extra:{name:a.value.name}}),r.value({model:a.value.name}),u(),s.value=!1}}}(e,t,{isUpdate:s,model:a});return l(),{close:n,dataForm:o,disabledBtnSave:u,initModel:l,loading:p,model:a,save:_,updateModel:r}},render(){return(0,i.h)(b.Z,{close:this.close,dataForm:this.dataForm,disabledSave:this.disabledBtnSave,headerText:"_A_TABLE_FILTER_SAVE_MODAL_HEADER_",modelValue:this.model,idPrefix:"modal_filter_top_",loading:this.loading,selectorCloseIds:this.selectorCloseIds,size:"large",save:this.save,"onUpdate:modelValue":this.updateModel},{modalBodyPrepend:()=>[(0,i.h)(m.Z,{type:"info",isVisible:!0,safeHtml:"_A_TABLE_FILTER_SAVE_MODAL_BODY_PREPEND_"})]})}};var E=l(4872),T=l(8976),A=l(3117),C=l(5409),V=l(7336);const I={name:"AFiltersHorizontalFilterUi",props:{filter:{type:Object,required:!1,default:void 0},id:{type:String,required:!0},isLabelVisible:{type:Boolean,required:!0},onUpdateModelFilters:{type:Function,required:!0},unappliedModel:{type:Object,required:!0},updateDataKeyByIdFromFilter:{type:Function,required:!0}},setup(e){const{isContainer:t}=function(e){const t=(0,i.Vh)(e,"filter");return{isContainer:(0,i.Fl)((()=>!!C.Z[t.value.type]))}}(e),{onUpdateModelFiltersLocal:l}=function(e,{isContainer:t=(0,i.Fl)((()=>!1))}){const l=(0,i.Vh)(e,"filter"),a=(0,i.Vh)(e,"onUpdateModelFilters"),r=(0,i.Vh)(e,"unappliedModel");return{onUpdateModelFiltersLocal:e=>{if(t.value)a.value({model:e});else{const t=(0,d.cloneDeep)(r.value);t[l.value.id]=(0,d.cloneDeep)(e),a.value({model:t})}}}}(e,{isContainer:t}),{emitForComponentsWithData:a}=function(e){const t=(0,i.Vh)(e,"filter"),l=(0,i.Vh)(e,"updateDataKeyByIdFromFilter"),a=["select","multiselect","radio","checkbox","group","fieldset"],r=({dataKeyByKeyId:e,item:i})=>{let a=t.value.id;i&&(a=i.id),l.value({filterId:a,dataKeyByKeyId:e})};return{emitForComponentsWithData:(0,i.Fl)((()=>{const e={};return-1!==a.indexOf(t.value.type)&&(e.onUpdateData=r),e}))}}(e),{idPrefix:r}=function(e){const t=(0,i.Vh)(e,"id");return{idPrefix:(0,i.Fl)((()=>`${t.value}_`))}}(e),{componentTypesMapping:o}={componentTypesMapping:{...T.Z,...A.Z}},{filterSpecificAttributes:s}=function(e){const t=(0,i.Vh)(e,"filter");return{filterSpecificAttributes:(0,i.Fl)((()=>{const e={};return V.x[t.value.type]&&(0,d.isUndefined)(t.value.inputWidth)&&(e.inputWidth="auto"),e}))}}(e);return{componentTypesMapping:o,emitForComponentsWithData:a,filterSpecificAttributes:s,idPrefix:r,isContainer:t,onUpdateModelFiltersLocal:l}},render(){return(0,i.h)(this.componentTypesMapping[this.filter.type],{idPrefix:this.idPrefix,modelValue:this.isContainer?this.unappliedModel:this.unappliedModel[this.filter.id],"onUpdate:modelValue":this.onUpdateModelFiltersLocal,...this.filter,...this.filterSpecificAttributes,label:this.isLabelVisible?this.filter.label:void 0,...this.emitForComponentsWithData},this.$slots)}},L={name:"AFiltersHorizontalFilter",props:{closable:{type:Boolean,required:!1},filter:{type:Object,required:!1,default:void 0},id:{type:String,required:!0},onUpdateModelFilters:{type:Function,required:!0},unappliedModel:{type:Object,required:!0},updateDataKeyByIdFromFilter:{type:Function,required:!0}},emits:["deleteFiltersVisible"],setup(e){const{isFilter:t}=function(e){const t=(0,i.Vh)(e,"filter");return{isFilter:(0,i.Fl)((()=>!(!t.value||!1===t.value.isRender)))}}(e),{isLabelInComponentVisible:l,labelClass:a}=function(e){const t=(0,i.Vh)(e,"filter");return{isLabelInComponentVisible:(0,i.Fl)((()=>!(t.value.label&&"oneCheckbox"!==t.value.type))),labelClass:"a_table__filters_top__filter_ui_label"}}(e),{htmlIdLocal:r}=function(e){const t=(0,i.Vh)(e,"filter"),l=(0,i.Vh)(e,"id"),a=(0,i.Fl)((()=>`${l.value}_`));return{htmlIdLocal:(0,i.Fl)((()=>(0,v.l)({id:t.value.id,idPrefix:a.value,htmlId:t.value.htmlId})))}}(e);return{htmlIdLocal:r,isLabelInComponentVisible:l,isFilter:t,labelClass:a}},render(){return this.isFilter&&(0,i.h)("div",{class:"a_table__filters_top__filter_ui_group"},[this.isLabelInComponentVisible?(0,i.h)("span",{class:this.labelClass,ariaHidden:!0}):(0,i.h)(E.Z,{id:this.htmlIdLocal,label:this.filter.label,class:this.labelClass,type:this.filter.type,isLabelFloat:!1}),(0,i.h)("div",{class:"a_table__filters_top__filter_ui_subgroup"},[(0,i.h)(I,{class:"a_table__filters_top__filter_ui",filter:this.filter,isLabelVisible:this.isLabelInComponentVisible,unappliedModel:this.unappliedModel,updateDataKeyByIdFromFilter:this.updateDataKeyByIdFromFilter,onUpdateModelFilters:this.onUpdateModelFilters,id:this.id},this.$slots),this.closable&&(0,i.h)(n.Z,{class:"a_btn a_btn_transparent_secondary a_table__filters_top__filter_ui_delete",title:"_A_TABLE_FILTER_TOP_CLOSE_",iconLeft:"Close",onClick:()=>this.$emit("deleteFiltersVisible",{filter:this.filter})})])])}};var M=l(570),g=l(3973),R=l(816);const B={name:"AFiltersHorizontal",props:{canSave:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},filtersGroup:{type:Object,required:!0,default:()=>({main:void 0,alwaysVisible:[],filters:[]})},filtersKeyById:{type:Object,required:!0},filtersSaved:{type:Array,required:!0},filtersVisible:{type:Array,required:!0},unappliedModel:{type:Object,required:!0},onUpdateModelFilters:{type:Function,required:!0},id:{type:String,required:!0},updateFiltersSaved:{type:Function,required:!0},updateDataKeyByIdFromFilter:{type:Function,required:!0}},emits:["startSearch","toggleFiltersVisible"],setup(e,t){const{idFilterTop:l}=function(e){const t=(0,i.Vh)(e,"id");return{idFilterTop:(0,i.Fl)((()=>`${t.value}_filter_top`))}}(e),{buttonToggleComponent:a,isOpen:r,onClose:o,onOpen:s,styleToggle:u}=function(e){const t=(0,i.Vh)(e,"filtersVisible"),l=(0,i.Vh)(e,"filtersGroup"),a=(0,i.iH)(!1),r=()=>{a.value=!0},o=()=>{a.value=!1},s=()=>{a.value?o():r()},d=(0,i.Fl)((()=>a.value?"ChevronUp":"ChevronDown")),u=(0,i.Fl)((()=>a.value?"_A_TABLE_CLOSE_ADVANCED_SEARCH_":"_A_TABLE_OPEN_ADVANCED_SEARCH_")),p=(0,i.Fl)((()=>a.value?"":"display: none;")),_=(0,i.Fl)((()=>!(!t.value.length&&!l.value.alwaysVisible.length)));return{buttonToggleComponent:(0,i.Fl)((()=>_.value&&(0,i.h)(n.Z,{class:"a_btn a_btn_link a_text_nowrap a_table__filters_top__toggle_filter",type:"button",text:u,iconRight:d,onClick:s,...g.zP.value.buttonToggle}))),isOpen:a,onClose:o,onOpen:r,styleToggle:p}}(e),{filterMainComponent:p}=function(e){const t=(0,i.Vh)(e,"filtersGroup"),l=(0,i.Vh)(e,"id"),a=(0,i.Vh)(e,"onUpdateModelFilters"),r=(0,i.Vh)(e,"unappliedModel"),o=(0,i.Vh)(e,"updateDataKeyByIdFromFilter");return{filterMainComponent:(0,i.Fl)((()=>t.value.main&&(0,i.h)(I,{id:l.value,class:"a_table__filters_top__filter_main",filter:t.value.main,isLabelVisible:!0,unappliedModel:r.value,onUpdateModelFilters:a.value,updateDataKeyByIdFromFilter:o.value})))}}(e),{buttonSearchComponent:_,onSearch:v}=function(e,{emit:t},{onClose:l=(()=>{})}){const a=(0,i.Vh)(e,"disabled"),r=()=>{a.value||(l(),t("startSearch"))};return{buttonSearchComponent:(0,i.Fl)((()=>(0,i.h)(n.Z,{class:"a_btn a_btn_primary a_text_nowrap a_table__filters_top__search",iconLeft:"Search",type:"submit",text:{desktop:"_A_TABLE_START_SEARCH_"},textScreenReader:{mobile:"_A_TABLE_START_SEARCH_"},prevent:!0,stop:!0,disabled:a.value,onClick:r,...g.zP.value.buttonSearch}))),onSearch:r}}(e,t,{onClose:o}),{destroyEventBus:h,initEventBus:F}=function(e,{onOpen:t=(()=>{})}){const l=`eventATableFilterTopOnOpen_${(0,i.Vh)(e,"id").value}`;return{destroyEventBus:()=>{c.Z.$off(l,t)},initEventBus:()=>{c.Z.$on(l,t)}}}(e,{onOpen:s}),{addFilterSelectComponent:f,addFiltersVisible:m,deleteFiltersVisible:b,filtersHidden:S,hasFiltersHiddenDefault:E}=function(e,{emit:t}){const l=(0,i.Vh)(e,"filtersGroup"),a=(0,i.Vh)(e,"filtersVisible"),r=({isAdd:e,filterId:l})=>{t("toggleFiltersVisible",{isAdd:e,filterId:l})},o=({model:e})=>{r({isAdd:!0,filterId:e})},s=(0,i.Fl)((()=>!(!l.value.filters||!l.value.filters.length))),n=(0,i.Fl)((()=>{const e={};return(0,d.forEach)(a.value,(t=>{e[t.id]=!0})),e})),u=(0,i.Fl)((()=>s.value?(0,d.filter)(l.value.filters,(e=>!n.value[e.id])):[]));return{addFilterSelectComponent:(0,i.Fl)((()=>s.value&&(0,i.h)(M.Z,{class:"a_table__filters_top__footer__select",type:"select",data:u.value,keyLabel:"label",keyId:"id",label:"_A_TABLE_FILTER_ADD_",translateData:!0,disabled:!u.value.length,search:!0,change:o}))),addFiltersVisible:o,deleteFiltersVisible:({filter:e})=>{r({isAdd:!1,filterId:e.id})},filtersHidden:u,hasFiltersHiddenDefault:s}}(e,t),{buttonSaveComponentBottom:T,buttonSaveTopComponent:A,changeModelFiltersSaved:C,closeModalSave:V,isModalSaveVisible:L,modelFiltersSaved:B,selectFiltersSavedComponent:D,selectorCloseIds:P}=function(e,{onOpen:t=(()=>({}))}){const l=(0,i.Vh)(e,"canSave"),a=(0,i.Vh)(e,"filtersSaved"),r=(0,i.Vh)(e,"onUpdateModelFilters"),o=(0,i.Vh)(e,"id"),s=(0,i.iH)(void 0),d=(0,i.iH)(void 0),u=(0,i.iH)(void 0),p=(0,i.Fl)((()=>`${o.value}btn_save_top`)),_=(0,i.Fl)((()=>`${o.value}btn_save_bottom`)),c=()=>{u.value=p.value,s.value=!0},v=()=>{u.value=_.value,s.value=!0},h=(0,i.Fl)((()=>({class:"a_btn a_btn_secondary a_text_nowrap a_table__filters_top__delete_filter_saved",text:{desktop:"_A_TABLE_FILTER_SAVE_BTN_"},iconLeft:{mobile:"FloppyDisk"},textScreenReader:{mobile:"_A_TABLE_FILTER_SAVE_BTN_"}}))),F=(0,i.Fl)((()=>l.value&&(0,i.h)(n.Z,{id:p.value,onClick:c,...h.value,...g.zP.value.buttonSaveTop}))),f=(0,i.Fl)((()=>l.value&&(0,i.h)(n.Z,{...h.value,id:_.value,onClick:v}))),m=({model:e,item:l})=>{d.value=e,e?l&&(r.value({model:l.data||{},isUpdateFiltersVisible:!0}),t()):l&&l&&(r.value({model:{},isUpdateFiltersVisible:!0}),t())},b=(0,i.Fl)((()=>l.value&&(0,i.h)(M.Z,{modelValue:d.value,class:"a_table__filters_top__save_select",type:"select",data:a.value,keyLabel:"label",keyId:"label",label:"_A_TABLE_FILTER_SAVE_SELECT_",translateData:!0,disabled:!a.value.length,search:!0,deselect:!0,change:m,...g.zP.value.selectFiltersSaved})));return{buttonSaveComponentBottom:f,buttonSaveTopComponent:F,changeModelFiltersSaved:m,closeModalSave:()=>{s.value=!1},isModalSaveVisible:s,modelFiltersSaved:d,selectFiltersSavedComponent:b,selectorCloseIds:u}}(e,{onOpen:s}),{buttonDeleteFiltersSavedComponent:O}=function(e,{changeModelFiltersSaved:t=(()=>{}),idFilterTop:l=(0,i.Fl)((()=>"")),modelFiltersSaved:a=(0,i.iH)(void 0)}){const r=(0,i.Vh)(e,"canSave"),o=(0,i.Vh)(e,"id"),s=(0,i.Vh)(e,"updateFiltersSaved"),{closeConfirm:d,openConfirm:u,changeConfirmOptions:p}=(0,R.Z)(),{addNotification:_}=(0,y.ZP)(),c=(0,i.Fl)((()=>`${o.value}btn_save_top`)),v=(0,i.Fl)((()=>!a.value)),h=(0,i.Fl)((()=>v.value?"_A_TABLE_FILTER_DELETE_FILTER_SAVED_BTN_DISABLED_":"_A_TABLE_FILTER_DELETE_FILTER_SAVED_BTN_{{name}}_")),F=async()=>{p({loading:!0});try{await s.value({action:"delete",label:a.value})}catch(e){return _({text:"_A_TABLE_FILTER_DELETE_FILTER_MSG_ERROR_{{name}}_",type:"danger",extra:{name:a.value}}),void p({loading:!1})}_({text:"_A_TABLE_FILTER_DELETE_FILTER_MSG_SUCCESS_{{name}}_",extra:{name:a.value}}),p({loading:!1}),d(),t({model:void 0})},f=()=>{u({headerText:"_A_TABLE_FILTER_DELETE_FILTER_HEADER_{{name}}_",bodyHtml:"_A_TABLE_FILTER_DELETE_FILTER_BODY_{{name}}_",extra:{name:a.value},save:F,selectorCloseIds:[c.value,l.value],saveButtonText:"_A_TABLE_FILTER_DELETE_FILTER_BTN_DELETE_"})};return{buttonDeleteFiltersSavedComponent:(0,i.Fl)((()=>r.value&&(0,i.h)(n.Z,{id:c.value,class:"a_btn a_btn_secondary a_table__filters_top__delete_filter_saved",iconLeft:"Trash",textScreenReader:h.value,title:h.value,extra:{name:a.value},ariaDisabled:v.value,onClick:f,...g.zP.value.buttonDeleteFiltersSaved})))}}(e,{changeModelFiltersSaved:C,idFilterTop:l,modelFiltersSaved:B}),{filtersTopFooter:q,filtersTopHeader:x}=function({filterMainComponent:e,buttonSearchComponent:t,buttonToggleComponent:l,selectFiltersSavedComponent:a,buttonDeleteFiltersSavedComponent:r,buttonSaveTopComponent:o,addFilterSelectComponent:s}){const n={filterMainComponent:e,buttonSearchComponent:t,buttonToggleComponent:l,selectFiltersSavedComponent:a,buttonDeleteFiltersSavedComponent:r,buttonSaveTopComponent:o,addFilterSelectComponent:s},u=(0,i.Fl)((()=>(0,i.h)("div",{class:"a_table__filters_top__header"},(0,d.map)(g.RN.value.config.headerTopGroups,(e=>(0,i.h)("div",{class:"a_table__filters_top__header__group",...e.props},(0,d.map)(e.children,(e=>n[`${e.component}Component`]?.value))))))));return{filtersTopFooter:(0,i.Fl)((()=>(0,i.h)("div",{class:"a_table__filters_top__footer"},(0,d.map)(g.RN.value.config.headerBottomGroups,(e=>(0,i.h)("div",{class:"a_table__filters_top__footer__group",...e.props},(0,d.map)(e.children,(e=>n[`${e.component}Component`]?.value)))))))),filtersTopHeader:u}}({filterMainComponent:p,buttonSearchComponent:_,buttonToggleComponent:a,selectFiltersSavedComponent:D,buttonDeleteFiltersSavedComponent:O,buttonSaveTopComponent:A,addFilterSelectComponent:f});return F(),(0,i.Jd)((()=>{h()})),{addFiltersVisible:m,buttonSaveComponentBottom:T,buttonSearchComponent:_,changeModelFiltersSaved:C,closeModalSave:V,deleteFiltersVisible:b,filtersHidden:S,filtersTopFooter:q,filtersTopHeader:x,hasFiltersHiddenDefault:E,idFilterTop:l,isModalSaveVisible:L,isOpen:r,modelFiltersSaved:B,onSearch:v,selectorCloseIds:P,styleToggle:u}},render(){return(0,i.h)("div",{id:this.idFilterTop,class:"a_table__filters_top"},[(0,i.h)("form",{},[this.filtersTopHeader,(0,i.h)("div",{class:"a_table__filters_top__always_visible",style:this.styleToggle},[this.filtersGroup.alwaysVisible.map((e=>(0,i.h)(L,{key:e.id,closable:!1,filter:e,unappliedModel:this.unappliedModel,onUpdateModelFilters:this.onUpdateModelFilters,updateDataKeyByIdFromFilter:this.updateDataKeyByIdFromFilter,id:this.id},this.$slots))),this.filtersVisible.map((e=>(0,i.h)(L,{key:e.id,closable:!0,filter:e,unappliedModel:this.unappliedModel,onUpdateModelFilters:this.onUpdateModelFilters,id:this.id,onDeleteFiltersVisible:this.deleteFiltersVisible,updateDataKeyByIdFromFilter:this.updateDataKeyByIdFromFilter},this.$slots))),this.filtersTopFooter])]),this.isModalSaveVisible&&(0,i.h)(S,{changeModelFiltersSaved:this.changeModelFiltersSaved,filtersSaved:this.filtersSaved,modelFiltersSaved:this.modelFiltersSaved,selectorCloseIds:this.selectorCloseIds,updateFiltersSaved:this.updateFiltersSaved,onClose:this.closeModalSave})])}},D={name:"AFilters",props:{appliedModel:{type:Object,required:!1,default:()=>({})},canSave:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},filters:{type:Array,required:!1,default:()=>[]},filtersSaved:{type:Array,required:!1,default:()=>[]},id:{type:String,required:!1,default:()=>(0,d.uniqueId)("a_filters_")},unappliedModel:{type:Object,required:!1,default:()=>({})},updateFiltersSaved:{type:Function,required:!1,default:void 0}},emits:["startSearch","update:appliedModel","update:unappliedModel"],setup(e,t){const{filtersDataKeyById:l,filtersGroup:a,filtersKeyById:r,filtersVisible:o,filtersVisibleAll:s,filtersVisibleIds:n,hasFilters:u,onUpdateModelFilters:p,setFiltersVisibleIds:c}=function(e,{emit:t}){const l=(0,i.Vh)(e,"filters"),a=(0,i.Vh)(e,"unappliedModel"),r=(0,i.iH)({}),o=(0,i.iH)([]),s=(0,i.Fl)((()=>l.value.length>0)),n=(0,i.Fl)((()=>{const e={};return(0,d.forEach)((0,d.cloneDeep)(l.value),(t=>{e[t.id]=t,C.Z[t.type]&&t.children&&t.children.length&&(0,d.forEach)(t.children,(t=>{e[t.id]=t}))})),e})),u=(0,i.Fl)((()=>{const e={main:void 0,alwaysVisible:[],filters:[]};return(0,d.forEach)((0,d.cloneDeep)(l.value),(t=>{t.main?e.main?e.alwaysVisible.push(t):e.main=t:t.alwaysVisible?e.alwaysVisible.push(t):e.filters.push(t)})),e})),p=(0,i.Fl)((()=>{const e=[];return(0,d.forEach)(o.value,(t=>{n.value[t]&&e.push(n.value[t])})),e})),_=(0,i.Fl)((()=>{const e=[];e.push(...l.value);const t=[];return(0,d.forEach)(e,(e=>{t.push(e),C.Z[e.type]&&e.children&&e.children.length&&(0,d.forEach)(e.children,(e=>{t.push(e)}))})),t})),c=()=>{const e=[];(0,d.forEach)(u.value.filters,(t=>{a.value[t.id]&&e.push(t.id)})),o.value=e};return{filtersDataKeyById:r,filtersGroup:u,filtersKeyById:n,filtersVisible:p,filtersVisibleAll:_,filtersVisibleIds:o,hasFilters:s,onUpdateModelFilters:({model:e,isUpdateFiltersVisible:l})=>{t("update:unappliedModel",e),l&&c()},setFiltersVisibleIds:c}}(e,t),{closeFilterValue:v}=function(e,{emit:t},{onUpdateModelFilters:l=(()=>{})}){const a=(0,i.Vh)(e,"appliedModel"),r=(0,i.Vh)(e,"unappliedModel");return{closeFilterValue:({filter:e,currentModel:i})=>{const o=(0,d.cloneDeep)(a.value);if(_[e.type]){if(o[e.id]&&o[e.id].length){const t=o[e.id].indexOf(i);-1!==t&&o[e.id].splice(t,1)}if(r.value[e.id]&&r.value[e.id].length){const l=r.value[e.id].indexOf(i);if(-1!==l){const i=(0,d.cloneDeep)(r.value);i[e.id].splice(l,1),t("update:unappliedModel",i)}}}else{const l=(0,d.cloneDeep)(r.value);l[e.id]=void 0,t("update:unappliedModel",l),o[e.id]=void 0}t("update:appliedModel",o),setTimeout((()=>{l({model:a.value})}))}}}(e,t,{onUpdateModelFilters:p}),{dataKeyByKeyIdPerFilter:h,updateDataKeyByIdFromFilter:F}=function(){const e=(0,i.iH)({});return{dataKeyByKeyIdPerFilter:e,updateDataKeyByIdFromFilter:({dataKeyByKeyId:t,filterId:l})=>{e.value[l]=(0,d.cloneDeep)(t)}}}(),{toggleFiltersVisible:f}=function(e,{filtersVisibleIds:t=(0,i.iH)([]),onUpdateModelFilters:l=(()=>{})}){const a=(0,i.Vh)(e,"unappliedModel");return{toggleFiltersVisible:({isAdd:e=!0,filterId:i})=>{if(e)t.value.push(i);else{const e=t.value.indexOf(i);-1!==e&&t.value.splice(e,1);const r=(0,d.cloneDeep)(a.value);r[i]=void 0,l({model:r})}}}}(e,{filtersVisibleIds:n,onUpdateModelFilters:p}),{startSearch:m}=function(e,{emit:t},{onUpdateModelFilters:l=(()=>{})}){const a=(0,i.Vh)(e,"appliedModel"),r=(0,i.Vh)(e,"unappliedModel");return{startSearch:()=>{t("update:appliedModel",r.value),setTimeout((()=>{l({model:a.value})}))}}}(e,t,{onUpdateModelFilters:p}),{filtersSavedLocal:b,initFiltersSaved:y,updateFiltersSavedLocal:S}=function(e){const t=(0,i.Vh)(e,"filtersSaved"),l=(0,i.Vh)(e,"unappliedModel"),a=(0,i.Vh)(e,"updateFiltersSaved"),r=(0,i.iH)([]);return{filtersSavedLocal:r,initFiltersSaved:()=>{r.value=t.value||[]},updateFiltersSavedLocal:({action:e="",label:t=""})=>{if("create"===e)r.value.push({label:t,data:(0,d.cloneDeep)(l.value)});else{const i=(0,d.findIndex)(r.value,["label",t]);-1!==i&&("delete"===e?r.value.splice(i,1):"update"===e&&r.value.splice(i,1,(0,d.cloneDeep)(l.value)))}(0,d.isFunction)(a.value)&&a.value({action:e,label:t,model:l.value,filtersSaved:r.value})}}}(e);return c(),y(),{closeFilterValue:v,dataKeyByKeyIdPerFilter:h,filtersDataKeyById:l,filtersGroup:a,filtersKeyById:r,filtersSavedLocal:b,filtersVisible:o,filtersVisibleAll:s,filtersVisibleIds:n,hasFilters:u,onUpdateModelFilters:p,setFiltersVisibleIds:c,startSearch:m,toggleFiltersVisible:f,updateDataKeyByIdFromFilter:F,updateFiltersSavedLocal:S}},render(){if(this.hasFilters)return(0,i.h)("div",[(0,i.h)(B,{id:this.id,canSave:this.canSave,disabled:this.disabled,filtersGroup:this.filtersGroup,filtersKeyById:this.filtersKeyById,filtersSaved:this.filtersSavedLocal,filtersVisible:this.filtersVisible,unappliedModel:this.unappliedModel,updateFiltersSaved:this.updateFiltersSavedLocal,onUpdateModelFilters:this.onUpdateModelFilters,updateDataKeyByIdFromFilter:this.updateDataKeyByIdFromFilter,onStartSearch:this.startSearch,onToggleFiltersVisible:this.toggleFiltersVisible},this.$slots),(0,i.h)(f,{id:this.id,appliedModel:this.appliedModel,closeFilterValue:this.closeFilterValue,dataKeyByKeyIdPerFilter:this.dataKeyByKeyIdPerFilter,disabled:this.disabled,filtersKeyById:this.filtersKeyById,filtersVisibleAll:this.filtersVisibleAll},this.$slots)])}},P={name:"PageFiltersExample",components:{AlohaExample:s.Z,AFilters:D},setup(){const{codeHtml:e}={codeHtml:'<a-filters\n  :filters="filters"\n  v-model:applied-model="appliedModel"\n  v-model:unapplied-model="unappliedModel"\n>\n</a-filters>'},{codeJs:t}={codeJs:'import {\n  ref,\n} from "vue";\n\nimport AFilters from "aloha-vue/src/AFilters/AFilters";\n    \nexport default {\n  name: "PageFiltersExample",\n  components: {\n    AFilters,\n  },\n  setup() {\n    const filters = [\n      {\n        type: "text",\n        id: "search",\n        label: "_A_PAGE_FILTER_SEARCH_",\n        main: true,\n      },\n      {\n        type: "text",\n        id: "aloha",\n        label: "_A_PAGE_FILTER_TEXT_",\n        alwaysVisible: true,\n      },\n      {\n        type: "date",\n        id: "date",\n        label: "_A_PAGE_FILTER_DATE_",\n        alwaysVisible: true,\n      },\n    ];\n\n    const appliedModel = ref({});\n    const unappliedModel = ref({});\n    \n    return {\n      appliedModel,\n      filters,\n      unappliedModel,\n    };\n  },\n};'};return{appliedModel:(0,i.iH)({}),codeHtml:e,codeJs:t,filters:[{type:"text",id:"search",label:"_A_PAGE_FILTER_SEARCH_",main:!0},{type:"text",id:"aloha",label:"_A_PAGE_FILTER_TEXT_",alwaysVisible:!0},{type:"date",id:"date",label:"_A_PAGE_FILTER_DATE_",alwaysVisible:!0}],unappliedModel:(0,i.iH)({})}}};var O=l(1419);const q=(0,O.Z)(P,[["render",function(e,t){const l=(0,i.up)("a-filters"),a=(0,i.up)("aloha-example");return(0,i.wg)(),(0,i.j4)(a,{"code-html":e.codeHtml,"code-js":e.codeJs,header:"_A_PAGE_FILTERS_HEADER_",description:"_A_PAGE_FILTERS_DESCRIPTION_",props:["filters","v-model:applied-model","v-model:unapplied-model"]},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(l,{filters:e.filters,"applied-model":e.appliedModel,"onUpdate:appliedModel":t[0]||(t[0]=t=>e.appliedModel=t),"unapplied-model":e.unappliedModel,"onUpdate:unappliedModel":t[1]||(t[1]=t=>e.unappliedModel=t)},null,8,["filters","applied-model","unapplied-model"])])])),_:1},8,["code-html","code-js"])}]]);var x=l(8405);const K={name:"PageFilters",components:{AlohaPage:a.Z,AlohaTableProps:r.Z,ATranslation:o.Z,PageFiltersExample:q},setup(){const{pageTitle:e}=function(){const e=(0,i.Fl)((()=>(0,x.Gd)({placeholder:"_A_FILTERS_COMPONENT_NAME_"})));return{pageTitle:(0,i.Fl)((()=>"AFilters"+(e.value?` (${e.value})`:"")))}}(),{dataProps:t}={dataProps:[{name:"alert-class",description:"_A_ALERT_PROPS_ALERT_CLASS_DESCRIPTION_",type:"String / Object",default:void 0,required:!1},{name:"alert-content-class",description:"_A_ALERT_PROPS_ALERT_CONTENT_CLASS_DESCRIPTION_",type:"String / Object",default:void 0,required:!1},{name:"btn-close-attributes",description:"_A_ALERT_PROPS_BTN_CLOSE_ATTRIBUTES_DESCRIPTION_",type:"Object",default:"{}",required:!1},{name:"closable",description:"_A_ALERT_PROPS_CLOSABLE_DESCRIPTION_",type:"Boolean",default:!1,required:!1},{name:"show-icon",description:"_A_ALERT_PROPS_HAS_ICON_DESCRIPTION_",type:"Boolean",default:!1,required:!1},{name:"html",description:"_A_ALERT_PROPS_HTML_DESCRIPTION_",type:"String",default:void 0,required:!1},{name:"icon",description:"_A_ALERT_PROPS_ICON_DESCRIPTION_",type:"String",default:void 0,required:!1},{name:"icon-class",description:"_A_ALERT_PROPS_ICON_CLASS_DESCRIPTION_",type:"String",default:void 0,required:!1},{name:"is-visible",description:"_A_ALERT_PROPS_IS_VISIBLE_DESCRIPTION_",type:"Boolean",default:!1,required:!1},{name:"removeAlertOnClose",description:"_A_ALERT_PROPS_REMOVE_ALERT_ON_CLOSE_DESCRIPTION_",type:"Boolean",default:!1,required:!1},{name:"safe-html",description:"_A_ALERT_PROPS_SAFE_HTML_DESCRIPTION_",type:"String",default:void 0,required:!1},{name:"text",description:"_A_ALERT_PROPS_TEXT_DESCRIPTION_",type:"String",default:void 0,required:!1},{name:"text-close",description:"_A_ALERT_PROPS_TEXT_CLOSE_DESCRIPTION_",type:"String",default:"_ALERT_CLOSE_",required:!1},{name:"type",description:"_A_ALERT_PROPS_TYPE_DESCRIPTION_",type:"String",default:"danger",required:!1}]},{dataSlots:l}={dataSlots:[{name:"default",description:"_A_ALERT_SLOTS_DEFAULT_DESCRIPTION_"}]},{dataEvents:a}={dataEvents:[{name:"close",description:"_A_ALERT_EVENTS_CLOSE_DESCRIPTION_",type:"Function"}]};return{dataEvents:a,dataProps:t,dataSlots:l,pageTitle:e}}},H=(0,O.Z)(K,[["render",function(e,t){const l=(0,i.up)("a-translation"),a=(0,i.up)("page-filters-example"),r=(0,i.up)("aloha-page");return(0,i.wg)(),(0,i.j4)(r,{"page-title":e.pageTitle},{body:(0,i.w5)((()=>[(0,i.Wm)(l,{tag:"p",html:"_A_FILTERS_COMPONENT_DESCRIPTION_"}),(0,i.Wm)(a),(0,i.kq)("aloha-table-props("),(0,i.kq)('  :data="dataProps"'),(0,i.kq)(")"),(0,i.kq)(""),(0,i.kq)("aloha-table-props("),(0,i.kq)('  table-label="Slots"'),(0,i.kq)('  :data="dataSlots"'),(0,i.kq)("  :columns=\"['name', 'description']\""),(0,i.kq)(")"),(0,i.kq)(""),(0,i.kq)("aloha-table-props("),(0,i.kq)('  table-label="Events"'),(0,i.kq)('  :data="dataEvents"'),(0,i.kq)("  :columns=\"['name', 'type', 'description']\""),(0,i.kq)(")")])),_:1},8,["page-title"])}]])}}]);
//# sourceMappingURL=chunk.6266.87178f9aae0b6c0f362d.js.map