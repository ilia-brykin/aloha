"use strict";(self.webpackChunkaloha_vue_docs=self.webpackChunkaloha_vue_docs||[]).push([[4415],{4415:(e,t,l)=>{l.d(t,{A:()=>O});var i=l(6365),a=l(9791),r=l(7791),s=l(286),d=l(8597),o=l(7119),n=l(2543);var u=l(6717),p=l(7284);const c={multiselect:!0,checkbox:!0};var h=l(5206);const f={checkbox:!0,multiselect:!0,radio:!0,select:!0},v={name:"AFilterCenterItem",props:{closeFilterValue:{type:Function,required:!0},dataKeyByKeyIdPerFilter:{type:Object,required:!0},disabled:{type:Boolean,required:!1},filter:{type:Object,required:!1,default:void 0},id:{type:String,required:!0},model:{type:[String,Number,Object,Array,Boolean],required:!1,default:void 0}},emits:["updateVisibleChildFilters","updateLoadingChildFilters"],setup(e,t){const{hasCurrentFilter:l}=function(e){const t=(0,i.lW)(e,"filter"),l=(0,i.lW)(e,"model"),a=(0,i.EW)((()=>function({filter:e,currentModel:t}){return!(!e||e.hideFilterCenter||(0,n.isNil)(t)||""===t||(0,n.isArray)(t)&&!t.length)}({filter:t.value,currentModel:l.value})));return{hasCurrentFilter:a}}(e),{isFilterLoading:a,updateLoadingChildFilters:r}=function(e,{emit:t},{hasCurrentFilter:l=(0,i.EW)((()=>!1))}){const a=(0,i.lW)(e,"dataKeyByKeyIdPerFilter"),r=(0,i.lW)(e,"filter"),s=(0,i.EW)((()=>!!l.value&&!!f[r.value.type]&&(0,n.isEmpty)(a.value[r.value.id])));return{isFilterLoading:s,updateLoadingChildFilters:(e,l)=>{e!==l&&t("updateLoadingChildFilters",{id:r.value.id,isLoading:s.value})}}}(e,t,{hasCurrentFilter:l}),{filterLabel:v}=function(e,{hasCurrentFilter:t=(0,i.EW)((()=>!1))}){const l=(0,i.lW)(e,"filter");return{filterLabel:(0,i.EW)((()=>t.value?l.value.label:""))}}(e,{hasCurrentFilter:l}),{modelValuesForCurrentFilter:_}=function(e,{hasCurrentFilter:t=(0,i.EW)((()=>!1))}){const l=(0,i.lW)(e,"dataKeyByKeyIdPerFilter"),a=(0,i.lW)(e,"filter"),r=(0,i.lW)(e,"model"),{filterBoolean:s,filterDate:d}=(0,u.A)(),o=(0,i.EW)((()=>{if(a.value)return l.value[a.value.id]})),f=(0,i.EW)((()=>r.value?.length?(0,n.filter)(r.value,(e=>o.value&&o.value[e])):[]));return{modelValuesForCurrentFilter:(0,i.EW)((()=>{if(!t.value)return[];if("switch"===a.value.type||"oneCheckbox"===a.value.type)return[{label:s(r.value)}];if("date"===a.value.type)return[{label:d(r.value)}];if("select"===a.value.type||"radio"===a.value.type){const e=(0,n.get)(o.value,`${r.value}.${p.A}`);return e?[{label:e}]:[]}if(c[a.value.type]||"radio"===a.value.type&&a.value.isModelArray){if(f.value.length){if(1===f.value.length){const e=o.value?.[f.value[0]];return[{label:e?.[p.A],item:e,modelArray:f.value}]}return[{label:"_A_FILTERS_SELECTED_{{count}}_",extra:{count:f.value.length,modelArray:f.value}}]}return[]}if("dateRange"===a.value.type){const e=a.value.keyFrom||"from",t=a.value.keyUntil||"until",l=[];return(0,n.isNil)(r.value?.[e])||""===r.value?.[e]||l.push({label:d(r.value[e]),filterLabelSuffix:a.value.labelFrom||"_A_DATEPICKER_RANGE_FROM_",idSuffix:"_from",keyId:e}),(0,n.isNil)(r.value?.[t])||""===r.value?.[t]||l.push({label:d(r.value[t]),filterLabelSuffix:a.value.labelUntil||"_A_DATEPICKER_RANGE_UNTIL_",idSuffix:"_until",keyId:t}),l}if(-1!==h.A.indexOf(a.value.type)){const e=a.value.keyMax||"max",t=a.value.keyMin||"min",l=[];return(0,n.isNil)(r.value?.[t])||""===r.value?.[t]||l.push({label:r.value[t],filterLabelSuffix:a.value.labelMin||"_A_INPUT_NUMBER_RANGE_LABEL_MIN_",idSuffix:"_min",keyId:t}),(0,n.isNil)(r.value?.[e])||""===r.value?.[e]||l.push({label:r.value[e],filterLabelSuffix:a.value.labelMax||"_A_INPUT_NUMBER_RANGE_LABEL_MAX_",idSuffix:"_max",keyId:e}),l}return[{label:r.value}]}))}}(e,{hasCurrentFilter:l}),{isLeastOneFilterVisible:F,updateVisibleChildFilters:y}=function(e,{emit:t},{modelValuesForCurrentFilter:l=(0,i.EW)((()=>[]))}){const a=(0,i.lW)(e,"filter"),r=(0,i.EW)((()=>l.value.length>0));return{isLeastOneFilterVisible:r,updateVisibleChildFilters:({destroy:e}={})=>{t("updateVisibleChildFilters",{id:a.value.id,isVisible:!e&&r.value})}}}(e,t,{modelValuesForCurrentFilter:_}),{goToFilter:m}=function(e){const t=(0,i.lW)(e,"filter"),l=(0,i.lW)(e,"id"),a=(0,i.EW)((()=>`eventATableFilterTopOnOpen_${l.value}`));return{goToFilter:({modelValue:e}={})=>{t.value.main||s.A.$emit(a.value);let i=(0,d.r)({id:t.value.id,idPrefix:`${l.value}_`,htmlId:t.value.htmlId});e.idSuffix&&(i+=e.idSuffix),setTimeout((()=>{(0,o.Ky)({selector:`#${i}`})}))}}}(e),{closeCurrentFilterValue:b}=function(e){const t=(0,i.lW)(e,"closeFilterValue"),l=(0,i.lW)(e,"disabled"),a=(0,i.lW)(e,"filter");return{closeCurrentFilterValue:({modelValue:e})=>{l.value||t.value({filter:a.value,modelArray:e.modelArray,keyId:e.keyId})}}}(e);return(0,i.wB)(F,(()=>{y()}),{immediate:!0}),(0,i.wB)(a,((e,t)=>{r(e,t)}),{immediate:!0}),(0,i.xo)((()=>{y({destroy:!0})})),{closeCurrentFilterValue:b,filterLabel:v,goToFilter:m,hasCurrentFilter:l,isLeastOneFilterVisible:F,modelValuesForCurrentFilter:_}},render(){return this.hasCurrentFilter&&[this.modelValuesForCurrentFilter.map((e=>(0,i.h)("div",{role:"group",class:"a_filters_center__item a_btn_group a_btn_group_small"},[this.filter.hasNotClose&&(0,i.h)(a.A,{class:"a_btn a_btn_secondary",ariaHidden:!0,tabindex:-1,iconLeft:"PinFill"}),(0,i.h)(a.A,{class:"a_btn a_btn_secondary",onClick:()=>this.goToFilter({modelValue:e})},(()=>[this.filterLabel&&(0,i.h)("strong",{class:"a_filters_center__item__label"},[(0,i.h)(r.A,{tag:"span",html:this.filterLabel}),e.filterLabelSuffix&&(0,i.h)(r.A,{class:"a_filters_center__item__label__suffix",tag:"span",html:e.filterLabelSuffix}),(0,i.h)("span",null,":")]),this.filter.slotName&&this.$slots[this.filter.slotName]?this.$slots[this.filter.slotName]({item:e.item,label:e.label}):(0,i.h)(r.A,{class:"a_filters_center__item__value",tag:"span",html:e.label,extra:e.extra})])),!this.filter.hasNotClose&&(0,i.h)(a.A,{class:"a_btn a_btn_secondary",disabled:this.disabled,iconLeft:"Close",onClick:()=>this.closeCurrentFilterValue({modelValue:e})})])))]}};var _=l(9757);const F={name:"AFilterCenter",props:{appliedModel:{type:Object,required:!0},closeAllFilters:{type:Function,required:!0},closeFilterValue:{type:Function,required:!0},dataKeyByKeyIdPerFilter:{type:Object,required:!0},disabled:{type:Boolean,required:!1},filtersKeyById:{type:Object,required:!0},filtersVisibleAll:{type:Array,required:!0},id:{type:String,required:!0}},setup(e){const{styleHide:t,updateVisibleChildFilters:l}=function(){const e=(0,i.KR)({}),t=(0,i.EW)((()=>{let t=!1;return(0,n.forEach)(e.value,(e=>{if(e)return t=!0,!1})),t}));return{styleHide:(0,i.EW)((()=>t.value?void 0:"display: none;")),updateVisibleChildFilters:({id:t,isVisible:l})=>{e.value[t]=l}}}(),{isLeastOneChildFilterLoading:a,updateLoadingChildFilters:r}=function(){const e=(0,i.KR)({});return{isLeastOneChildFilterLoading:(0,i.EW)((()=>{let t=!1;return(0,n.forEach)(e.value,(e=>{if(e)return t=!0,!1})),t})),updateLoadingChildFilters:({id:t,isLoading:l})=>{e.value[t]=l}}}();return{isLeastOneChildFilterLoading:a,styleHide:t,updateLoadingChildFilters:r,updateVisibleChildFilters:l}},render(){return(0,i.h)("div",{class:"a_filters_center",style:this.styleHide},[(0,i.h)(r.A,{class:"a_filters_center__headline a_filters_center__item",tag:"span",text:"_A_FILTERS_YOUR_SELECTION_"}),this.filtersVisibleAll.map((e=>(0,i.h)(v,{key:e.id,id:this.id,disabled:this.disabled,filter:e,closeFilterValue:this.closeFilterValue,dataKeyByKeyIdPerFilter:this.dataKeyByKeyIdPerFilter,model:this.appliedModel[e.modelId||e.id],onUpdateVisibleChildFilters:this.updateVisibleChildFilters,onUpdateLoadingChildFilters:this.updateLoadingChildFilters},this.$slots))),this.isLeastOneChildFilterLoading?(0,i.h)("div",{class:"a_filters_center__item"},[(0,i.h)(_.A,{class:"a_spinner_small"})]):"",(0,i.h)("div",{class:"a_filters_center__item"},[(0,i.h)(a.A,{class:"a_btn a_btn_link a_btn_small",text:"_A_FILTERS_DESELECT_ALL_",onClick:this.closeAllFilters})])])}};var y=l(7216),m=l(8490),b=l(6756),S=l(3789),g=l(760);const E={name:"AModalForm",inheritAttrs:!1,props:{bodyHtml:{type:String,required:!1,default:""},close:{type:Function,required:!0},closeButtonClass:{type:[String,Array,Object],required:!1,default:()=>g.B.value.propsDefault.closeButtonClass},closeButtonId:{type:String,required:!1,default:void 0},closeButtonText:{type:String,required:!1,default:()=>g.B.value.propsDefault.closeButtonText},dataForm:{type:Array,required:!1,default:()=>[]},disabled:{type:Boolean,required:!1,default:!1},disabledSave:{type:Boolean,required:!1,default:!1},errors:{type:Object,required:!1,default:()=>({})},extra:{type:Object,required:!1,default:void 0},headerTag:{type:String,required:!1,default:()=>g.B.value.propsDefault.headerTag},headerText:{type:String,required:!1,default:void 0},id:{type:String,required:!1,default:()=>(0,n.uniqueId)("a_modal_form_")},idPrefix:{type:String,required:!1,default:()=>g.B.value.propsDefault.idPrefix},isCloseButtonHide:{type:Boolean,required:!1,default:()=>g.B.value.propsDefault.isCloseButtonHide},isConfirm:{type:Boolean,required:!1},isDataFormHide:{type:Boolean,required:!1,default:g.B.value.propsDefault.isDataFormHide},isDataFormRender:{type:Boolean,required:!1,default:()=>g.B.value.propsDefault.isDataFormRender},isModalHidden:{type:Boolean,required:!1,default:!1},isRequired:{type:Boolean,required:!1,default:g.B.value.propsDefault.isRequired},isSaveButtonHide:{type:Boolean,required:!1,default:()=>g.B.value.propsDefault.isSaveButtonHide},loading:{type:Boolean,required:!1},modalClass:{type:[String,Object],required:!1,default:()=>g.B.value.propsDefault.modalClass},modelValue:{type:Object,required:!1,default:void 0},save:{type:Function,required:!1,default:void 0},saveButtonClass:{type:[String,Array,Object],required:!1,default:()=>g.B.value.propsDefault.saveButtonClass},saveButtonId:{type:String,required:!1,default:void 0},saveButtonText:{type:String,required:!1,default:()=>g.B.value.propsDefault.saveButtonText},selectorClose:{type:[String,Array],required:!1,default:()=>g.B.value.propsDefault.selectorClose},selectorCloseIds:{type:[String,Array],required:!1,default:()=>g.B.value.propsDefault.selectorCloseIds},size:{type:String,validator:e=>-1!==["small","large","xl","xxl","fullscreen"].indexOf(e),default:()=>g.B.value.propsDefault.size},textErrorHeader:{type:String,required:!1,default:void 0},textRequired:{type:String,required:!1,default:()=>g.B.value.propsDefault.textRequired},useEscape:{type:Boolean,required:!1,default:()=>g.B.value.propsDefault.useEscape}},emits:["update:modelValue"],setup(e,t){const{hasDataForm:l}=function(e){const t=(0,i.lW)(e,"dataForm");return{hasDataForm:(0,i.EW)((()=>t.value.length>0))}}(e),{updateModelLocal:a}=function({emit:e}){return{updateModelLocal:t=>{e("update:modelValue",t)}}}(t);return{hasDataForm:l,updateModelLocal:a}},render(){return(0,i.h)(S.A,{close:this.close,closeButtonClass:this.closeButtonClass,closeButtonId:this.closeButtonId,closeButtonText:this.closeButtonText,disabled:this.disabled,disabledSave:this.disabledSave,extra:this.extra,headerTag:this.headerTag,headerText:this.headerText,id:this.id,isCloseButtonHide:this.isCloseButtonHide,isConfirm:this.isConfirm,isModalHidden:this.isModalHidden,isSaveButtonHide:this.isSaveButtonHide,loading:this.loading,modalClass:this.modalClass,save:this.save,saveButtonClass:this.saveButtonClass,saveButtonId:this.saveButtonId,saveButtonText:this.saveButtonText,selectorClose:this.selectorClose,selectorCloseIds:this.selectorCloseIds,size:this.size,useEscape:this.useEscape},{...this.$slots||{},modalBody:()=>[this.$slots.modalBodyPrepend&&this.$slots.modalBodyPrepend(),this.hasDataForm&&(0,i.h)(b.A,{modelValue:this.modelValue,data:this.dataForm,errors:this.errors,idPrefix:this.idPrefix,isRequired:this.isRequired,textRequired:this.textRequired,textErrorHeader:this.textErrorHeader,isHide:this.isDataFormHide,isRender:this.isDataFormRender,"onUpdate:modelValue":this.updateModelLocal},this.$slots),this.bodyHtml&&(0,i.h)(r.A,{html:this.bodyHtml,extra:this.extra}),this.$slots.modalBodyAppend&&this.$slots.modalBodyAppend()]})}};var A=l(4991);const I={name:"AFiltersSaveModal",props:{changeModelFiltersSaved:{type:Function,required:!0},filtersSaved:{type:Array,required:!0},modelFiltersSaved:{type:String,required:!1,default:void 0},selectorCloseIds:{type:String,required:!0},updateFiltersSaved:{type:Function,required:!0}},emits:["close"],setup(e,t){const{initModel:l,model:a,updateModel:r}=function(e){const t=(0,i.lW)(e,"modelFiltersSaved"),l=(0,i.KR)({});return{initModel:()=>{t.value&&(l.value={name:t.value})},model:l,updateModel:e=>{l.value=e}}}(e),{dataForm:s,isUpdate:d}=function(e,{model:t=(0,i.KR)({})}){const l=(0,i.lW)(e,"filtersSaved"),a=(0,i.EW)((()=>{const e={};return(0,n.forEach)(l.value,(t=>{e[t.label]=!0})),e})),r=(0,i.EW)((()=>a.value[t.value.name])),s=(0,i.EW)((()=>{if(r.value)return"_A_FILTERS_SAVE_MODAL_NAME_HELP_TEXT_{{name}}_"}));return{dataForm:(0,i.EW)((()=>[{id:"name",label:"_A_FILTERS_SAVE_LABEL_NAME_",type:"text",required:!0,extra:{name:t.value.name||""},helpText:s.value}])),isUpdate:r}}(e,{model:a}),{close:o,disabledBtnSave:u,loading:p,save:c}=function(e,{emit:t},{isUpdate:l=(0,i.EW)((()=>!1)),model:a=(0,i.KR)({})}){const r=(0,i.lW)(e,"changeModelFiltersSaved"),s=(0,i.lW)(e,"updateFiltersSaved"),d=(0,i.KR)(void 0),{addNotification:o}=(0,A.Ay)(),n=(0,i.EW)((()=>!a.value.name)),u=()=>{t("close")};return{close:u,disabledBtnSave:n,loading:d,save:async()=>{d.value=!0;const e=l.value;try{await s.value({action:e?"update":"create",label:a.value.name})}catch(e){return o({text:"_A_FILTERS_SAVE_MSG_ERROR_",type:"danger"}),void(d.value=!1)}o({text:e?"_A_FILTERS_SAVE_MSG_SUCCESS_UPDATE_{{name}}_":"_A_FILTERS_SAVE_MSG_SUCCESS_CREATE_{{name}}_",extra:{name:a.value.name}}),r.value({model:a.value.name}),u(),d.value=!1}}}(e,t,{isUpdate:d,model:a});return l(),{close:o,dataForm:s,disabledBtnSave:u,initModel:l,loading:p,model:a,save:c,updateModel:r}},render(){return(0,i.h)(E,{close:this.close,dataForm:this.dataForm,disabledSave:this.disabledBtnSave,headerText:"_A_FILTERS_SAVE_MODAL_HEADER_",modelValue:this.model,idPrefix:"modal_filter_top_",loading:this.loading,selectorCloseIds:this.selectorCloseIds,size:"large",save:this.save,"onUpdate:modelValue":this.updateModel},{modalBodyPrepend:()=>[(0,i.h)(m.A,{type:"info",isVisible:!0,safeHtml:"_A_FILTERS_SAVE_MODAL_BODY_PREPEND_"})]})}};var B=l(7008),M=l(4738),C=l(2515),L=l(262);const V={};(0,n.forEach)(["datepickerRange","dateRange"],(e=>{V[e]=!0}));const T=V,D={name:"AFiltersHorizontalFilterUi",props:{filter:{type:Object,required:!1,default:void 0},id:{type:String,required:!0},isLabelVisible:{type:Boolean,required:!0},onUpdateModelFilters:{type:Function,required:!0},unappliedModel:{type:Object,required:!0},updateDataKeyByIdFromFilter:{type:Function,required:!0}},setup(e){const{isContainer:t}=function(e){const t=(0,i.lW)(e,"filter");return{isContainer:(0,i.EW)((()=>!!L.A[t.value.type]))}}(e),{onUpdateModelFiltersLocal:l}=function(e,{isContainer:t=(0,i.EW)((()=>!1))}){const l=(0,i.lW)(e,"filter"),a=(0,i.lW)(e,"onUpdateModelFilters"),r=(0,i.lW)(e,"unappliedModel");return{onUpdateModelFiltersLocal:e=>{if(t.value)a.value({model:e});else{const t=(0,n.cloneDeep)(r.value);t[l.value.modelId||l.value.id]=(0,n.cloneDeep)(e),a.value({model:t})}}}}(e,{isContainer:t}),{emitForComponentsWithData:a}=function(e){const t=(0,i.lW)(e,"filter"),l=(0,i.lW)(e,"updateDataKeyByIdFromFilter"),a=["select","multiselect","radio","checkbox","group","fieldset"],r=({dataKeyByKeyId:e,item:i})=>{let a=t.value.id;i&&(a=i.id),l.value({filterId:a,dataKeyByKeyId:e})};return{emitForComponentsWithData:(0,i.EW)((()=>{const e={};return-1!==a.indexOf(t.value.type)&&(e.onUpdateData=r),e}))}}(e),{idPrefix:r}=function(e){const t=(0,i.lW)(e,"id");return{idPrefix:(0,i.EW)((()=>`${t.value}_`))}}(e),{componentTypesMapping:s}={componentTypesMapping:{...M.A,...C.A}},{filterSpecificAttributes:d}=function(e){const t=(0,i.lW)(e,"filter");return{filterSpecificAttributes:(0,i.EW)((()=>{const e={},l=h.i[t.value.type],i=T[t.value.type];return l&&(0,n.isUndefined)(t.value.inputWidth)&&(e.inputWidth="auto"),i&&(e.inputWidth="inherit",e.inputAttributes={style:"min-width: 181px"}),e}))}}(e);return{componentTypesMapping:s,emitForComponentsWithData:a,filterSpecificAttributes:d,idPrefix:r,isContainer:t,onUpdateModelFiltersLocal:l}},render(){return(0,i.h)(this.componentTypesMapping[this.filter.type],{idPrefix:this.idPrefix,modelValue:this.isContainer?this.unappliedModel:this.unappliedModel[this.filter.modelId||this.filter.id],"onUpdate:modelValue":this.onUpdateModelFiltersLocal,...this.filter,...this.filterSpecificAttributes,label:this.isLabelVisible?this.filter.label:void 0,...this.emitForComponentsWithData},this.$slots)}},W={name:"AFiltersHorizontalFilter",props:{closable:{type:Boolean,required:!1},filter:{type:Object,required:!1,default:void 0},id:{type:String,required:!0},isFilterMain:{type:Boolean,required:!1},onUpdateModelFilters:{type:Function,required:!0},unappliedModel:{type:Object,required:!0},updateDataKeyByIdFromFilter:{type:Function,required:!0}},emits:["deleteFiltersVisible"],setup(e){const{isFilter:t}=function(e){const t=(0,i.lW)(e,"filter");return{isFilter:(0,i.EW)((()=>!(!t.value||!1===t.value.isRender)))}}(e),{isLabelInComponentVisible:l,labelClass:a}=function(e){const t=(0,i.lW)(e,"filter");return{isLabelInComponentVisible:(0,i.EW)((()=>!(t.value.label&&"oneCheckbox"!==t.value.type))),labelClass:"a_filters_top__filter_ui_label"}}(e),{htmlIdLocal:r}=function(e){const t=(0,i.lW)(e,"filter"),l=(0,i.lW)(e,"id"),a=(0,i.EW)((()=>`${l.value}_`));return{htmlIdLocal:(0,i.EW)((()=>(0,d.r)({id:t.value.id,idPrefix:a.value,htmlId:t.value.htmlId})))}}(e);return{htmlIdLocal:r,isLabelInComponentVisible:l,isFilter:t,labelClass:a}},render(){return this.isFilter&&(0,i.h)("div",{class:"a_filters_top__filter_ui_group"},[this.isLabelInComponentVisible?(0,i.h)("span",{class:this.labelClass,ariaHidden:!0}):(0,i.h)(B.A,{id:this.htmlIdLocal,label:this.filter.label,class:this.labelClass,type:this.filter.type,isLabelFloat:!1}),(0,i.h)("div",{class:"a_filters_top__filter_ui_subgroup"},[(0,i.h)(D,{class:"a_filters_top__filter_ui",filter:this.filter,isLabelVisible:this.isLabelInComponentVisible,unappliedModel:this.unappliedModel,updateDataKeyByIdFromFilter:this.updateDataKeyByIdFromFilter,onUpdateModelFilters:this.onUpdateModelFilters,id:this.id},this.$slots),this.isFilterMain&&this.$slots.btnSearchStart(),this.closable&&(0,i.h)(a.A,{class:"a_btn a_btn_transparent_secondary a_filters_top__filter_ui_delete",title:"_A_FILTERS_TOP_CLOSE_",iconLeft:"Close",onClick:()=>this.$emit("deleteFiltersVisible",{filter:this.filter})})])])}};var R=l(6072);const x={name:"AFiltersHorizontal",props:{canSave:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},filtersGroup:{type:Object,required:!0,default:()=>({main:void 0,alwaysVisible:[],filters:[]})},filtersKeyById:{type:Object,required:!0},filtersSaved:{type:Array,required:!0},filtersVisible:{type:Array,required:!0},unappliedModel:{type:Object,required:!0},onUpdateModelFilters:{type:Function,required:!0},id:{type:String,required:!0},updateFiltersSaved:{type:Function,required:!0},updateDataKeyByIdFromFilter:{type:Function,required:!0}},emits:["startSearch","toggleFiltersVisible"],setup(e,t){const{idFilterTop:l}=function(e){const t=(0,i.lW)(e,"id");return{idFilterTop:(0,i.EW)((()=>`${t.value}_filter_top`))}}(e),{iconToggle:a,isBtnToggleVisible:r,isOpen:d,onClose:o,onOpen:u,onToggle:p,styleToggle:c,textToggle:h}=function(e){const t=(0,i.lW)(e,"filtersGroup"),l=(0,i.KR)(!1),a=()=>{l.value=!0},r=()=>{l.value=!1},s=(0,i.EW)((()=>l.value?"ChevronUp":"ChevronDown")),d=(0,i.EW)((()=>l.value?"_A_FILTERS_CLOSE_ADVANCED_SEARCH_":"_A_FILTERS_OPEN_ADVANCED_SEARCH_")),o=(0,i.EW)((()=>l.value?"":"display: none;"));return{iconToggle:s,isBtnToggleVisible:(0,i.EW)((()=>!(!t.value.alwaysVisible.length&&!t.value.filters.length))),isOpen:l,onClose:r,onOpen:a,onToggle:()=>{l.value?r():a()},styleToggle:o,textToggle:d}}(e),{onSearch:f}=function(e,{emit:t},{onClose:l=(()=>{})}){const a=(0,i.lW)(e,"disabled");return{onSearch:()=>{a.value||(l(),t("startSearch"))}}}(e,t,{onClose:o}),{destroyEventBus:v,initEventBus:_}=function(e,{onOpen:t=(()=>{})}){const l=`eventATableFilterTopOnOpen_${(0,i.lW)(e,"id").value}`;return{destroyEventBus:()=>{s.A.$off(l,t)},initEventBus:()=>{s.A.$on(l,t)}}}(e,{onOpen:u}),{addFiltersVisible:F,deleteFiltersVisible:y,filtersHidden:m,hasFiltersHiddenDefault:b}=function(e,{emit:t}){const l=(0,i.lW)(e,"filtersGroup"),a=(0,i.lW)(e,"filtersVisible"),r=({isAdd:e,filterId:l})=>{t("toggleFiltersVisible",{isAdd:e,filterId:l})},s=(0,i.EW)((()=>!(!l.value.filters||!l.value.filters.length))),d=(0,i.EW)((()=>{const e={};return(0,n.forEach)(a.value,(t=>{e[t.id]=!0})),e}));return{addFiltersVisible:({model:e})=>{r({isAdd:!0,filterId:e})},deleteFiltersVisible:({filter:e})=>{r({isAdd:!1,filterId:e.id})},filtersHidden:(0,i.EW)((()=>s.value?(0,n.filter)(l.value.filters,(e=>!d.value[e.id])):[])),hasFiltersHiddenDefault:s}}(e,t),{buttonSaveComponentId:S,changeModelFiltersSaved:g,closeModalSave:E,isModalSaveVisible:I,modelFiltersSaved:B,openModalSave:M,selectorCloseIds:C}=function(e,{onOpen:t=(()=>({}))}){const l=(0,i.lW)(e,"onUpdateModelFilters"),a=(0,i.lW)(e,"id"),r=(0,i.KR)(void 0),s=(0,i.KR)(void 0),d=(0,i.KR)(void 0),o=(0,i.EW)((()=>`${a.value}btn_save_`));return{buttonSaveComponentId:o,changeModelFiltersSaved:({model:e,item:i})=>{s.value=e,e?i&&(l.value({model:i.data||{},isUpdateFiltersVisible:!0}),t()):i&&i&&(l.value({model:{},isUpdateFiltersVisible:!0}),t())},closeModalSave:()=>{r.value=!1},isModalSaveVisible:r,modelFiltersSaved:s,openModalSave:()=>{d.value=o.value,r.value=!0},selectorCloseIds:d}}(e,{onOpen:u}),{buttonDeleteId:L,disabledButtonDeleteFiltersSaved:V,openDeleteConfirm:T,titleButtonDeleteFiltersSaved:D}=function(e,{changeModelFiltersSaved:t=(()=>{}),idFilterTop:l=(0,i.EW)((()=>"")),modelFiltersSaved:a=(0,i.KR)(void 0)}){const r=(0,i.lW)(e,"id"),s=(0,i.lW)(e,"updateFiltersSaved"),{closeConfirm:d,openConfirm:o,changeConfirmOptions:n}=(0,R.A)(),{addNotification:u}=(0,A.Ay)(),p=(0,i.EW)((()=>`${r.value}btn_save`)),c=(0,i.EW)((()=>!a.value)),h=(0,i.EW)((()=>c.value?"_A_FILTERS_DELETE_FILTER_SAVED_BTN_DISABLED_":"_A_FILTERS_DELETE_FILTER_SAVED_BTN_{{name}}_")),f=async()=>{n({loading:!0});try{await s.value({action:"delete",label:a.value})}catch(e){return u({text:"_A_FILTERS_DELETE_FILTER_MSG_ERROR_{{name}}_",type:"danger",extra:{name:a.value}}),void n({loading:!1})}u({text:"_A_FILTERS_DELETE_FILTER_MSG_SUCCESS_{{name}}_",extra:{name:a.value}}),n({loading:!1}),d(),t({model:void 0})};return{buttonDeleteId:p,disabledButtonDeleteFiltersSaved:c,openDeleteConfirm:()=>{o({headerText:"_A_FILTERS_DELETE_FILTER_HEADER_{{name}}_",bodyHtml:"_A_FILTERS_DELETE_FILTER_BODY_{{name}}_",extra:{name:a.value},save:f,selectorCloseIds:[p.value,l.value],saveButtonText:"_A_FILTERS_DELETE_FILTER_BTN_DELETE_"})},titleButtonDeleteFiltersSaved:h}}(e,{changeModelFiltersSaved:g,idFilterTop:l,modelFiltersSaved:B});return _(),(0,i.xo)((()=>{v()})),{addFiltersVisible:F,buttonSaveComponentId:S,changeModelFiltersSaved:g,closeModalSave:E,deleteFiltersVisible:y,filtersHidden:m,hasFiltersHiddenDefault:b,idFilterTop:l,isBtnToggleVisible:r,isModalSaveVisible:I,onToggle:p,textToggle:h,isOpen:d,modelFiltersSaved:B,openModalSave:M,iconToggle:a,onSearch:f,selectorCloseIds:C,styleToggle:c,buttonDeleteId:L,disabledButtonDeleteFiltersSaved:V,openDeleteConfirm:T,titleButtonDeleteFiltersSaved:D}},render(){const e=(0,i.h)(a.A,{class:"a_btn a_btn_primary a_text_nowrap a_filters_top__search",iconLeft:"Search",type:"submit",text:{desktop:"_A_FILTERS_START_SEARCH_"},textScreenReader:{mobile:"_A_FILTERS_START_SEARCH_"},prevent:!0,stop:!0,disabled:this.disabled,onClick:this.onSearch});return(0,i.h)("div",{id:this.idFilterTop,class:"a_filters_top"},[(0,i.h)("form",{class:"a_filters_top__form"},[(0,i.h)("div",{class:"a_filters_top__header"},[(0,i.h)(W,{id:this.id,class:"a_filters_top__filter_main",closable:!1,filter:this.filtersGroup.main,isFilterMain:!0,unappliedModel:this.unappliedModel,updateDataKeyByIdFromFilter:this.updateDataKeyByIdFromFilter,onUpdateModelFilters:this.onUpdateModelFilters},{...this.$slots,btnSearchStart:()=>e})]),this.isBtnToggleVisible&&(0,i.h)(a.A,{class:"a_btn a_btn_secondary a_text_nowrap a_filters_top__toggle_filter",type:"button",text:this.textToggle,iconRight:this.iconToggle,onClick:this.onToggle}),(0,i.h)("div",{class:"a_filters_top__always_visible",style:this.styleToggle},[this.filtersGroup.alwaysVisible.map((e=>(0,i.h)(W,{key:e.id,closable:!1,filter:e,unappliedModel:this.unappliedModel,onUpdateModelFilters:this.onUpdateModelFilters,updateDataKeyByIdFromFilter:this.updateDataKeyByIdFromFilter,id:this.id},this.$slots))),this.filtersVisible.map((e=>(0,i.h)(W,{key:e.id,closable:!0,filter:e,unappliedModel:this.unappliedModel,onUpdateModelFilters:this.onUpdateModelFilters,id:this.id,onDeleteFiltersVisible:this.deleteFiltersVisible,updateDataKeyByIdFromFilter:this.updateDataKeyByIdFromFilter},this.$slots))),(0,i.h)("div",{class:"a_filters_top__footer"},[(0,i.h)(y.A,{class:"a_filters_top__footer__select",type:"select",data:this.filtersHidden,keyGroup:"group",keyLabel:"label",keyId:"id",label:"_A_FILTERS_ADD_FILTER_",menuWidthType:"by_content",translateData:!0,disabled:!this.filtersHidden.length,search:!0,change:this.addFiltersVisible}),e])])]),this.isModalSaveVisible&&(0,i.h)(I,{changeModelFiltersSaved:this.changeModelFiltersSaved,filtersSaved:this.filtersSaved,modelFiltersSaved:this.modelFiltersSaved,selectorCloseIds:this.selectorCloseIds,updateFiltersSaved:this.updateFiltersSaved,onClose:this.closeModalSave}),this.canSave&&(0,i.h)("div",{class:"a_filters_top__save"},[(0,i.h)(y.A,{modelValue:this.modelFiltersSaved,change:this.changeModelFiltersSaved,class:"a_filters_top__save_select",data:this.filtersSaved,deselect:!0,disabled:!this.filtersSaved.length,keyId:"label",keyLabel:"label",label:"_A_FILTERS_SAVE_SELECT_",menuWidthType:"by_content",search:!0,translateData:!0,type:"select"}),(0,i.h)(a.A,{id:this.buttonSaveComponentId,onClick:this.openModalSave,class:"a_btn a_btn_secondary a_text_nowrap a_filters_top__delete_filter_saved",text:{desktop:"_A_FILTERS_SAVE_BTN_"},iconLeft:{mobile:"FloppyDisk"},textScreenReader:{mobile:"_A_FILTERS_SAVE_BTN_"}}),(0,i.h)(a.A,{id:this.buttonDeleteId,class:"a_btn a_btn_secondary",iconLeft:"Trash",textScreenReader:this.titleButtonDeleteFiltersSaved,title:this.titleButtonDeleteFiltersSaved,extra:{name:this.modelFiltersSaved},ariaDisabled:this.disabledButtonDeleteFiltersSaved,onClick:this.openDeleteConfirm})])])}},q={name:"AFilersRight",props:{disabled:{type:Boolean,required:!1},filters:{type:Array,required:!1,default:()=>[]},filtersKeyById:{type:Object,required:!0},appliedModel:{type:Object,required:!0},onUpdateModelFilters:{type:Function,required:!0},id:{type:String,required:!0},updateDataKeyByIdFromFilter:{type:Function,required:!0}},emits:["startSearch"],setup(e){const{idFilterRight:t}=function(e){const t=(0,i.lW)(e,"id");return{idFilterRight:(0,i.EW)((()=>`${t.value}_filter_right`))}}(e);return{idFilterRight:t}},render(){return(0,i.h)("div",{id:this.idFilterRight,class:"a_filters_right"},[(0,i.h)("form",{},[this.filters.map((e=>(0,i.h)(D,{class:"a_filters_right__filter_ui",filter:e,isLabelVisible:!0,unappliedModel:this.appliedModel,updateDataKeyByIdFromFilter:this.updateDataKeyByIdFromFilter,onUpdateModelFilters:this.onUpdateModelFilters,id:this.id},this.$slots)))])])}},K={dateRange:!0,integerNonNegativeRange:!0,integerPositiveRange:!0,integerRange:!0,numberRange:!0},O={name:"AFilters",props:{appliedModel:{type:Object,required:!1,default:()=>({})},canSave:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},filters:{type:Array,required:!1,default:()=>[]},filtersSaved:{type:Array,required:!1,default:()=>[]},id:{type:String,required:!1,default:()=>(0,n.uniqueId)("a_filters_")},unappliedModel:{type:Object,required:!1,default:()=>({})},updateFiltersSaved:{type:Function,required:!1,default:void 0},view:{type:String,required:!1,default:"top",validator:e=>-1!==["top","right"].indexOf(e)},viewRightTeleportSelector:{type:String,required:!1,default:void 0}},emits:["startSearch","update:appliedModel","update:unappliedModel"],setup(e,t){const l=(0,i.lW)(e,"filtersSaved"),{filtersDataKeyById:a,filtersGroup:r,filtersKeyById:s,filtersVisible:d,filtersVisibleAll:o,filtersVisibleIds:u,hasFilters:p,onUpdateModelFilters:h,setFiltersVisibleIds:f,updateAppliedModel:v}=function(e,{emit:t}){const l=(0,i.lW)(e,"filters"),a=(0,i.lW)(e,"unappliedModel"),r=(0,i.KR)({}),s=(0,i.KR)([]),d=(0,i.EW)((()=>l.value.length>0)),o=(0,i.EW)((()=>{const e={};return(0,n.forEach)((0,n.cloneDeep)(l.value),(t=>{e[t.id]=t,L.A[t.type]&&t.children&&t.children.length&&(0,n.forEach)(t.children,(t=>{e[t.id]=t}))})),e})),u=(0,i.EW)((()=>{const e={main:void 0,alwaysVisible:[],filters:[]};return(0,n.forEach)((0,n.cloneDeep)(l.value),(t=>{t.main?e.main?e.alwaysVisible.push(t):e.main=t:t.alwaysVisible?e.alwaysVisible.push(t):e.filters.push(t)})),e})),p=(0,i.EW)((()=>{const e=[];return(0,n.forEach)(s.value,(t=>{o.value[t]&&e.push(o.value[t])})),e})),c=(0,i.EW)((()=>{const e=[];e.push(...l.value);const t=[];return(0,n.forEach)(e,(e=>{t.push(e),L.A[e.type]&&e.children&&e.children.length&&(0,n.forEach)(e.children,(e=>{t.push(e)}))})),t})),h=()=>{const e=[];(0,n.forEach)(u.value.filters,(t=>{t.id in a.value&&e.push(t.id)})),s.value=e};return{filtersDataKeyById:r,filtersGroup:u,filtersKeyById:o,filtersVisible:p,filtersVisibleAll:c,filtersVisibleIds:s,hasFilters:d,onUpdateModelFilters:({model:e,isUpdateFiltersVisible:l})=>{t("update:unappliedModel",e),l&&h()},setFiltersVisibleIds:h,updateAppliedModel:({model:e})=>{t("update:appliedModel",e)}}}(e,t),{closeAllFilters:_,closeFilterValue:F}=function(e,{emit:t},{filtersVisibleAll:l=(0,i.EW)((()=>[])),onUpdateModelFilters:a=(()=>{})}){const r=(0,i.lW)(e,"appliedModel"),s=(0,i.lW)(e,"unappliedModel"),d=({filter:e,keyId:t,modelArray:l,appliedModelLocal:i,unappliedModelLocal:a})=>{const r=e.modelId||e.id;return c[e.type]?(i[r]&&i[r].length&&(i[r]=l?(0,n.filter)(i[r],(e=>-1===l.indexOf(e))):[]),a[r]&&a[r].length&&(a[r]=l?(0,n.filter)(a[r],(e=>-1===l.indexOf(e))):[])):K[e.type]&&t?((0,n.isPlainObject)(a?.[r])&&(a[r][t]=void 0),(0,n.isPlainObject)(i?.[r])&&(i[r][t]=void 0)):(a[r]=void 0,i[r]=void 0),{appliedModelLocal:i,unappliedModelLocal:a}};return{closeAllFilters:()=>{let e=(0,n.cloneDeep)(r.value),i=(0,n.cloneDeep)(s.value);(0,n.forEach)(l.value,(t=>{const l=d({filter:t,appliedModelLocal:e,unappliedModelLocal:i});e=l.appliedModelLocal,i=l.unappliedModelLocal})),t("update:unappliedModel",i),t("update:appliedModel",e),setTimeout((()=>{a({model:r.value})}))},closeFilterValue:({filter:e,keyId:l,modelArray:i})=>{const o=(0,n.cloneDeep)(r.value),u=(0,n.cloneDeep)(s.value),{appliedModelLocal:p,unappliedModelLocal:c}=d({filter:e,keyId:l,modelArray:i,appliedModelLocal:o,unappliedModelLocal:u});t("update:unappliedModel",c),t("update:appliedModel",p),setTimeout((()=>{a({model:r.value})}))}}}(e,t,{filtersVisibleAll:o,onUpdateModelFilters:h}),{dataKeyByKeyIdPerFilter:y,updateDataKeyByIdFromFilter:m}=function(){const e=(0,i.KR)({});return{dataKeyByKeyIdPerFilter:e,updateDataKeyByIdFromFilter:({dataKeyByKeyId:t,filterId:l})=>{e.value[l]=(0,n.cloneDeep)(t)}}}(),{toggleFiltersVisible:b}=function(e,{filtersVisibleIds:t=(0,i.KR)([]),onUpdateModelFilters:l=(()=>{})}){const a=(0,i.lW)(e,"unappliedModel");return{toggleFiltersVisible:({isAdd:e=!0,filterId:i})=>{if(e)t.value.push(i);else{const e=t.value.indexOf(i);-1!==e&&t.value.splice(e,1);const r=(0,n.cloneDeep)(a.value);r[i]=void 0,l({model:r})}}}}(e,{filtersVisibleIds:u,onUpdateModelFilters:h}),{startSearch:S}=function(e,{emit:t},{onUpdateModelFilters:l=(()=>{})}){const a=(0,i.lW)(e,"appliedModel"),r=(0,i.lW)(e,"unappliedModel");return{startSearch:()=>{t("update:appliedModel",r.value),setTimeout((()=>{l({model:a.value})}))}}}(e,t,{onUpdateModelFilters:h}),{filtersSavedLocal:g,initFiltersSaved:E,updateFiltersSavedLocal:A}=function(e){const t=(0,i.lW)(e,"filtersSaved"),l=(0,i.lW)(e,"unappliedModel"),a=(0,i.lW)(e,"updateFiltersSaved"),r=(0,i.KR)([]);return{filtersSavedLocal:r,initFiltersSaved:()=>{r.value=t.value||[]},updateFiltersSavedLocal:({action:e="",label:t=""})=>{if("create"===e)r.value.push({label:t,data:(0,n.cloneDeep)(l.value)});else{const i=(0,n.findIndex)(r.value,["label",t]);-1!==i&&("delete"===e?r.value.splice(i,1):"update"===e&&r.value.splice(i,1,(0,n.cloneDeep)(l.value)))}(0,n.isFunction)(a.value)&&a.value({action:e,label:t,model:l.value,filtersSaved:r.value})}}}(e);return(0,i.wB)(l,(()=>{E()}),{deep:!0}),f(),E(),{closeAllFilters:_,closeFilterValue:F,dataKeyByKeyIdPerFilter:y,filtersDataKeyById:a,filtersGroup:r,filtersKeyById:s,filtersSavedLocal:g,filtersVisible:d,filtersVisibleAll:o,filtersVisibleIds:u,hasFilters:p,onUpdateModelFilters:h,setFiltersVisibleIds:f,startSearch:S,toggleFiltersVisible:b,updateDataKeyByIdFromFilter:m,updateFiltersSavedLocal:A,updateAppliedModel:v}},render(){if(this.hasFilters)return(0,i.h)("div",["top"===this.view&&(0,i.h)(x,{id:this.id,canSave:this.canSave,disabled:this.disabled,filtersGroup:this.filtersGroup,filtersKeyById:this.filtersKeyById,filtersSaved:this.filtersSavedLocal,filtersVisible:this.filtersVisible,unappliedModel:this.unappliedModel,updateFiltersSaved:this.updateFiltersSavedLocal,onUpdateModelFilters:this.onUpdateModelFilters,updateDataKeyByIdFromFilter:this.updateDataKeyByIdFromFilter,onStartSearch:this.startSearch,onToggleFiltersVisible:this.toggleFiltersVisible},this.$slots),"right"===this.view&&(0,i.h)(i.Im,{to:this.viewRightTeleportSelector,disabled:!this.viewRightTeleportSelector},[(0,i.h)(q,{id:this.id,disabled:this.disabled,filters:this.filters,filtersKeyById:this.filtersKeyById,appliedModel:this.appliedModel,onUpdateModelFilters:this.updateAppliedModel,updateDataKeyByIdFromFilter:this.updateDataKeyByIdFromFilter,onStartSearch:this.startSearch},this.$slots)]),(0,i.h)(F,{id:this.id,appliedModel:this.appliedModel,closeAllFilters:this.closeAllFilters,closeFilterValue:this.closeFilterValue,dataKeyByKeyIdPerFilter:this.dataKeyByKeyIdPerFilter,disabled:this.disabled,filtersKeyById:this.filtersKeyById,filtersVisibleAll:this.filtersVisibleAll},this.$slots)])}}}}]);
//# sourceMappingURL=chunk.4415.70c1c2d47c3540fdb773.js.map